import{m as Ge,p as y,j as ve,s as fe,x as Ye,y as Ze,c as Z,o as u,w as V,g as p,i as L,b as e,t as B,f as S,e as N,T as Je,z as q,a as A,d as W,h as Qe,l as me,F as Y,q as X,n as ee,A as he,k as ge,B as we,C as xe,D as I}from"./app-B9wWLYBX.js";import{_ as We}from"./AuthenticatedLayout-BLzpSxRM.js";import{P as te}from"./PrimaryButton-BKQyY_7u.js";import{_ as oe,D as Xe}from"./SecondaryButton-CbiMx5ng.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B2lDYo2Y.js";const tt={key:0,class:"fixed inset-0 z-50 overflow-hidden"},ot={class:"relative flex items-center"},st={class:"bg-white rounded-lg shadow-xl max-w-6xl max-h-[90vh] w-full min-w-[800px] overflow-hidden"},nt={class:"flex items-center justify-between p-4 border-b"},lt={class:"text-lg font-semibold text-gray-900"},at={class:"text-sm text-gray-500"},it={class:"flex items-center gap-2"},rt=["href"],dt={class:"relative overflow-auto bg-gray-50 min-h-[600px] h-[calc(90vh-8rem)]"},ut={key:0,class:"flex items-center justify-center h-full"},ct={key:1,class:"flex items-center justify-center h-full"},pt={class:"text-center"},vt={class:"mt-2 text-sm text-gray-600"},ft={key:2,class:"flex items-center justify-center h-full"},mt={key:3,class:"h-full min-h-[600px]"},ht={key:0,class:"h-full min-h-[600px] flex items-center justify-center p-4"},gt=["src","alt"],wt=["src"],xt={key:2,class:"h-full flex items-center justify-center bg-black"},yt=["src"],kt={key:3,class:"h-full flex items-center justify-center"},bt=["src"],Bt={key:4,class:"h-full overflow-auto"},Ct={class:"bg-white p-4 text-sm font-mono whitespace-pre-wrap break-words"},Mt=Ge({__name:"FileViewer",props:{file:{},bucketId:{},modelValue:{type:Boolean}},emits:["update:modelValue","navigate-prev","navigate-next"],setup(o,{emit:s}){const n=o,a=s,r=y(!0),c=y(""),v=y(""),f=y(""),M=y(!1),C=ve(()=>{var k;if(!n.file)return"unknown";const x=((k=n.file.name.split(".").pop())==null?void 0:k.toLowerCase())||"";return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",webm:"video",mov:"video",avi:"video",mkv:"video",mp3:"audio",wav:"audio",ogg:"audio",m4a:"audio",flac:"audio",pdf:"pdf",txt:"text",log:"text",md:"text",js:"code",ts:"code",jsx:"code",tsx:"code",css:"code",scss:"code",sass:"code",html:"code",xml:"code",json:"code",php:"code",py:"code",java:"code",c:"code",cpp:"code",h:"code",sql:"code",sh:"code",yml:"code",yaml:"code"}[x]||"unknown"}),_=ve(()=>["image","video","audio","pdf","text","code"].includes(C.value)),m=async()=>{var x,h;if(!(!n.file||!n.modelValue)){if(r.value=!0,c.value="",v.value="",f.value="",M.value=!1,!_.value){r.value=!1;return}try{const k=await q.post(route("files.view-url",{bucket:n.bucketId}),{key:n.file.path});k.data.is_text&&k.data.content?(f.value=k.data.content,M.value=!0):(v.value=k.data.view_url,M.value=!1)}catch(k){console.error("Failed to load view URL:",k),c.value=((h=(x=k.response)==null?void 0:x.data)==null?void 0:h.error)||"Failed to load file preview"}finally{r.value=!1}}};fe(()=>n.modelValue,x=>{x&&n.file&&m()}),fe(()=>n.file,x=>{x&&n.modelValue&&m()});const $=()=>{a("update:modelValue",!1),v.value="",f.value="",c.value="",M.value=!1},U=x=>{n.modelValue&&(x.key==="Escape"?$():x.key==="ArrowLeft"?a("navigate-prev"):x.key==="ArrowRight"&&a("navigate-next"))};Ye(()=>{window.addEventListener("keydown",U)}),Ze(()=>{window.removeEventListener("keydown",U)});const D=x=>{if(x===0)return"0 Bytes";const h=1024,k=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(x)/Math.log(h));return parseFloat((x/Math.pow(h,j)).toFixed(2))+" "+k[j]};return(x,h)=>(u(),Z(Je,{name:"modal"},{default:V(()=>{var k,j,F,z;return[x.modelValue?(u(),p("div",tt,[e("div",{class:"absolute inset-0 bg-black bg-opacity-75 cursor-pointer",onClick:$}),e("div",{class:"relative h-full flex items-center justify-center p-4",onClick:N($,["self"])},[e("div",ot,[e("button",{onClick:h[0]||(h[0]=P=>x.$emit("navigate-prev")),class:"absolute -left-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Previous file (←)"},h[2]||(h[2]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("button",{onClick:h[1]||(h[1]=P=>x.$emit("navigate-next")),class:"absolute -right-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Next file (→)"},h[3]||(h[3]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),e("div",st,[e("div",nt,[e("div",null,[e("h3",lt,B((k=x.file)==null?void 0:k.name),1),e("p",at,B(D(((j=x.file)==null?void 0:j.size)||0)),1)]),e("div",it,[e("a",{href:x.route("files.download",{bucket:x.bucketId,key:(F=x.file)==null?void 0:F.path}),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},h[4]||(h[4]=[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),S(" Download ",-1)]),8,rt),e("button",{onClick:$,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},h[5]||(h[5]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",dt,[r.value?(u(),p("div",ut,h[6]||(h[6]=[e("div",{class:"text-center"},[e("svg",{class:"animate-spin h-10 w-10 text-gray-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading preview...")],-1)]))):c.value?(u(),p("div",ct,[e("div",pt,[h[7]||(h[7]=e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("p",vt,B(c.value),1)])])):_.value?v.value||f.value?(u(),p("div",mt,[C.value==="image"?(u(),p("div",ht,[e("img",{src:v.value,alt:(z=x.file)==null?void 0:z.name,class:"max-w-full max-h-full object-contain"},null,8,gt)])):C.value==="pdf"?(u(),p("iframe",{key:1,src:v.value,class:"w-full h-full min-h-[600px]",frameborder:"0"},null,8,wt)):C.value==="video"?(u(),p("div",xt,[e("video",{src:v.value,controls:"",class:"max-w-full max-h-full"}," Your browser does not support the video tag. ",8,yt)])):C.value==="audio"?(u(),p("div",kt,[e("audio",{src:v.value,controls:"",class:"w-full max-w-md"}," Your browser does not support the audio tag. ",8,bt)])):(C.value==="text"||C.value==="code")&&M.value?(u(),p("div",Bt,[e("pre",Ct,[e("code",null,B(f.value),1)])])):L("",!0)])):L("",!0):(u(),p("div",ft,h[8]||(h[8]=[e("div",{class:"text-center"},[e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"This file type cannot be previewed"),e("p",{class:"mt-1 text-xs text-gray-500"},"Please download the file to view it")],-1)])))])])])])])):L("",!0)]}),_:1}))}}),_t=et(Mt,[["__scopeId","data-v-62055ee5"]]);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(o,s,n){const a=Number(0xffffffffn&s),r=Number(s>>32n);this.setUint32(o+(n?0:4),a,n),this.setUint32(o+(n?4:0),r,n)}});var K=o=>new DataView(new ArrayBuffer(o)),H=o=>new Uint8Array(o.buffer||o),O=o=>new TextEncoder().encode(String(o)),E=o=>Math.min(4294967295,Number(o)),ye=o=>Math.min(65535,Number(o));function Ut(o,s,n){s===void 0||s instanceof Date||(s=new Date(s));const a=o!==void 0;if(n||(n=a?436:509),o instanceof File)return{isFile:a,t:s||new Date(o.lastModified),bytes:o.stream(),mode:n};if(o instanceof Response)return{isFile:a,t:s||new Date(o.headers.get("Last-Modified")||Date.now()),bytes:o.body,mode:n};if(s===void 0)s=new Date;else if(isNaN(s))throw new Error("Invalid modification date.");if(!a)return{isFile:a,t:s,mode:n};if(typeof o=="string")return{isFile:a,t:s,bytes:O(o),mode:n};if(o instanceof Blob)return{isFile:a,t:s,bytes:o.stream(),mode:n};if(o instanceof Uint8Array||o instanceof ReadableStream)return{isFile:a,t:s,bytes:o,mode:n};if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))return{isFile:a,t:s,bytes:H(o),mode:n};if(Symbol.asyncIterator in o)return{isFile:a,t:s,bytes:be(o[Symbol.asyncIterator]()),mode:n};throw new TypeError("Unsupported input format.")}function be(o,s=o){return new ReadableStream({async pull(n){let a=0;for(;n.desiredSize>a;){const r=await o.next();if(!r.value){n.close();break}{const c=jt(r.value);n.enqueue(c),a+=c.byteLength}}},cancel(n){var a;(a=s.throw)==null||a.call(s,n)}})}function jt(o){return typeof o=="string"?O(o):o instanceof Uint8Array?o:H(o)}function Be(o,s,n){let[a,r]=function(c){return c?c instanceof Uint8Array?[c,1]:ArrayBuffer.isView(c)||c instanceof ArrayBuffer?[H(c),1]:[O(c),0]:[void 0,0]}(s);if(o instanceof File)return{i:se(a||O(o.name)),o:BigInt(o.size),u:r};if(o instanceof Response){const c=o.headers.get("content-disposition"),v=c&&c.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),f=v&&v[1]||o.url&&new URL(o.url).pathname.split("/").findLast(Boolean),M=f&&decodeURIComponent(f),C=n||+o.headers.get("content-length");return{i:se(a||O(M)),o:BigInt(C),u:r}}return a=se(a,o!==void 0||n!==void 0),typeof o=="string"?{i:a,o:BigInt(O(o).length),u:r}:o instanceof Blob?{i:a,o:BigInt(o.size),u:r}:o instanceof ArrayBuffer||ArrayBuffer.isView(o)?{i:a,o:BigInt(o.byteLength),u:r}:{i:a,o:Ft(o,n),u:r}}function Ft(o,s){return s>-1?BigInt(s):o?void 0:0n}function se(o,s=1){if(!o||o.every(n=>n===47))throw new Error("The file must have a name.");if(s)for(;o[o.length-1]===47;)o=o.subarray(0,-1);else o[o.length-1]!==47&&(o=new Uint8Array([...o,47]));return o}var Ce=new Uint32Array(256);for(let o=0;o<256;++o){let s=o;for(let n=0;n<8;++n)s=s>>>1^(1&s&&3988292384);Ce[o]=s}function ke(o,s=0){s=~s;for(var n=0,a=o.length;n<a;n++)s=s>>>8^Ce[255&s^o[n]];return~s>>>0}function Me(o,s,n=0){const a=o.getSeconds()>>1|o.getMinutes()<<5|o.getHours()<<11,r=o.getDate()|o.getMonth()+1<<5|o.getFullYear()-1980<<9;s.setUint16(n,a,1),s.setUint16(n+2,r,1)}function zt({i:o,u:s},n){return 8*(!s||(n??function(a){try{$t.decode(a)}catch{return 0}return 1}(o)))}var $t=new TextDecoder("utf8",{fatal:1});function Vt(o,s=0){const n=K(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|s),Me(o.t,n,10),n.setUint16(26,o.i.length,1),H(n)}async function*At(o){let{bytes:s}=o;if("then"in s&&(s=await s),s instanceof Uint8Array)yield s,o.l=ke(s,0),o.o=BigInt(s.length);else{o.o=0n;const n=s.getReader();for(;;){const{value:a,done:r}=await n.read();if(r)break;o.l=ke(a,o.l),o.o+=BigInt(a.length),yield a}}}function Dt(o,s){const n=K(16+(s?8:0));return n.setUint32(0,1347094280),n.setUint32(4,o.isFile?o.l:0,1),s?(n.setBigUint64(8,o.o,1),n.setBigUint64(16,o.o,1)):(n.setUint32(8,E(o.o),1),n.setUint32(12,E(o.o),1)),H(n)}function It(o,s,n=0,a=0){const r=K(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048|n),Me(o.t,r,12),r.setUint32(16,o.isFile?o.l:0,1),r.setUint32(20,E(o.o),1),r.setUint32(24,E(o.o),1),r.setUint16(28,o.i.length,1),r.setUint16(30,a,1),r.setUint16(40,o.mode|(o.isFile?32768:16384),1),r.setUint32(42,E(s),1),H(r)}function St(o,s,n){const a=K(n);return a.setUint16(0,1,1),a.setUint16(2,n-4,1),16&n&&(a.setBigUint64(4,o.o,1),a.setBigUint64(12,o.o,1)),a.setBigUint64(n-8,s,1),H(a)}function _e(o){return o instanceof File||o instanceof Response?[[o],[o]]:[[o.input,o.name,o.size],[o.input,o.lastModified,o.mode]]}var Lt=o=>function(s){let n=BigInt(22),a=0n,r=0;for(const c of s){if(!c.i)throw new Error("Every file must have a non-empty name.");if(c.o===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(c.i)}".`);const v=c.o>=0xffffffffn,f=a>=0xffffffffn;a+=BigInt(46+c.i.length+(v&&8))+c.o,n+=BigInt(c.i.length+46+(12*f|28*v)),r||(r=v)}return(r||a>=0xffffffffn)&&(n+=BigInt(76)),n+a}(function*(s){for(const n of s)yield Be(..._e(n)[0])}(o));function Ht(o,s={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof s.length=="bigint"||Number.isInteger(s.length))&&s.length>0&&(n["Content-Length"]=String(s.length)),s.metadata&&(n["Content-Length"]=String(Lt(s.metadata))),new Response(Pt(o,s),{headers:n})}function Pt(o,s={}){const n=function(a){var c;const r=a[Symbol.iterator in a?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const v=await r.next();if(v.done)return v;const[f,M]=_e(v.value);return{done:0,value:Object.assign(Ut(...M),Be(...f))}},throw:(c=r.throw)==null?void 0:c.bind(r),[Symbol.asyncIterator](){return this}}}(o);return be(async function*(a,r){const c=[];let v=0n,f=0n,M=0;for await(const m of a){const $=zt(m,r.buffersAreUTF8);yield Vt(m,$),yield new Uint8Array(m.i),m.isFile&&(yield*At(m));const U=m.o>=0xffffffffn,D=12*(v>=0xffffffffn)|28*U;yield Dt(m,U),c.push(It(m,v,$,D)),c.push(m.i),D&&c.push(St(m,v,D)),U&&(v+=8n),f++,v+=BigInt(46+m.i.length)+m.o,M||(M=U)}let C=0n;for(const m of c)yield m,C+=BigInt(m.length);if(M||v>=0xffffffffn){const m=K(76);m.setUint32(0,1347094022),m.setBigUint64(4,BigInt(44),1),m.setUint32(12,755182848),m.setBigUint64(24,f,1),m.setBigUint64(32,f,1),m.setBigUint64(40,C,1),m.setBigUint64(48,v,1),m.setUint32(56,1347094023),m.setBigUint64(64,v+C,1),m.setUint32(72,1,1),yield H(m)}const _=K(22);_.setUint32(0,1347093766),_.setUint16(8,ye(f),1),_.setUint16(10,ye(f),1),_.setUint32(12,E(C),1),_.setUint32(16,E(v),1),yield H(_)}(n,s),n)}const Tt={class:"flex items-center justify-between"},Nt={class:"text-sm text-gray-600 mt-1"},Et={class:"flex items-center space-x-2"},Rt={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={key:1},Ot={key:2},Kt={key:0,class:"fixed inset-0 z-50 bg-indigo-50 bg-opacity-90 flex items-center justify-center pointer-events-none"},Gt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Yt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative"},Zt={class:"p-4 border-b border-gray-200"},Jt={class:"flex items-center space-x-2 text-sm"},Qt={class:"p-6"},Wt={key:0,class:"text-center py-12"},Xt={key:1,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},eo={class:"min-w-full divide-y divide-gray-300"},to={class:"bg-gray-50"},oo={scope:"col",class:"w-12 px-6 py-3"},so=["checked"],no={class:"bg-white divide-y divide-gray-200"},lo={class:"px-6 py-4"},ao=["checked","onChange"],io={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ro={class:"flex items-center group"},uo=["onClick"],co={class:"hover:underline"},po=["onClick"],vo=["stroke-width"],fo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},mo={class:"flex items-center space-x-2"},ho={class:"relative group"},go=["onClick","disabled"],wo={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xo={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yo={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},ko={class:"relative group"},bo=["onClick"],Bo={class:"px-6 py-4"},Co=["checked","onChange"],Mo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},_o={class:"flex items-center group"},Uo=["onClick"],jo={key:0,class:"h-5 w-5 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Fo={key:1,class:"h-5 w-5 text-purple-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},zo={key:2,class:"h-5 w-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$o={key:3,class:"h-5 w-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Vo={key:4,class:"h-5 w-5 text-blue-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ao={key:5,class:"h-5 w-5 text-yellow-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Do={key:6,class:"h-5 w-5 text-indigo-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Io={key:7,class:"h-5 w-5 text-gray-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},So={key:8,class:"h-5 w-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lo=["onClick"],Ho=["stroke-width"],Po={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},To={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},No={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Eo={class:"flex items-center space-x-2"},Ro={class:"relative group"},qo=["onClick"],Oo={key:1,disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},Ko={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},Go={class:"relative group"},Yo=["onClick"],Zo={class:"relative group"},Jo=["onClick"],Qo={key:0,class:"fixed inset-0 overflow-y-auto z-50"},Wo={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Xo={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},es={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ts={class:"sm:flex sm:items-start"},os={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},ss={class:"mt-4"},ns=["disabled"],ls={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},as={key:0,class:"fixed inset-0 overflow-y-auto z-50"},is={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},rs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},ds={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},us={class:"sm:flex sm:items-start"},cs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},ps={class:"text-lg leading-6 font-medium text-gray-900"},vs={class:"mt-4"},fs=["placeholder","disabled"],ms={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},bs={__name:"Index",props:{files:Array,folders:Array,activeBucket:Object,currentPath:String,breadcrumb:Array},setup(o){const s=o,n=y(null),a=y(!1),r=y(0),c=y(0),v=y(0),f=y(new Set),M=y(!1),C=y(!1),_=y(null),m=y(!1),$=y(0),U=y(null),D=y(0),x=y(!1),h=y(""),k=y(!1),j=y(!1),F=y(null),z=y(""),P=y(!1),Ue=l=>{I.get(route("files.index",{bucket:s.activeBucket.id,prefix:l}))},je=()=>{if(s.currentPath){const l=s.currentPath.split("/").filter(d=>d);l.pop();const t=l.length>0?l.join("/")+"/":"";I.get(route("files.index",{bucket:s.activeBucket.id,prefix:t}))}},ne=()=>{n.value.click()},Fe=async l=>{const t=Array.from(l.target.files);if(t.length===0)return;c.value=t.length,v.value=0,r.value=0,a.value=!0;let d=0,g=[];for(const b of t)try{await le(b),d++,v.value++,r.value=Math.round(v.value/c.value*100)}catch{g.push(b.name),v.value++,r.value=Math.round(v.value/c.value*100)}l.target.value="",a.value=!1,r.value=0,f.value.clear(),d>0?I.reload({only:["files","folders"],onSuccess:()=>{g.length>0&&alert(`${d} file(s) uploaded successfully. Failed to upload: ${g.join(", ")}`)}}):g.length>0&&alert(`Failed to upload: ${g.join(", ")}`)},le=async(l,t="")=>{var d,g,b,i;try{const w=t||l.name,qe=w.split("/").pop(),pe=w.substring(0,w.lastIndexOf("/")),J=await q.post(route("files.upload-url",{bucket:s.activeBucket.id}),{filename:w,content_type:l.type||"application/octet-stream",prefix:s.currentPath}),{upload_url:R,key:Q}=J.data;await q.put(R,l,{headers:{"Content-Type":l.type||"application/octet-stream"}})}catch(w){throw console.error("Upload failed:",w),console.error("Error details:",w.response),alert("Upload error: "+(((g=(d=w.response)==null?void 0:d.data)==null?void 0:g.error)||((i=(b=w.response)==null?void 0:b.data)==null?void 0:i.message)||w.message)),w}},ze=l=>{window.location.href=route("files.download",{bucket:s.activeBucket.id,key:l.path})},ae=l=>{_.value=l,C.value=!0},$e=()=>{const l=s.files.findIndex(t=>{var d;return t.path===((d=_.value)==null?void 0:d.path)});l>0&&(_.value=s.files[l-1])},Ve=()=>{const l=s.files.findIndex(t=>{var d;return t.path===((d=_.value)==null?void 0:d.path)});l<s.files.length-1&&(_.value=s.files[l+1])},Ae=l=>{confirm(`Are you sure you want to delete ${l.name}?`)&&I.delete(route("files.destroy",{bucket:s.activeBucket.id,key:l.path}),{preserveState:!0,preserveScroll:!0})},De=l=>{confirm(`Are you sure you want to delete the folder "${l.name}" and all its contents?`)&&I.delete(route("files.destroy",{bucket:s.activeBucket.id,key:l.path}),{preserveState:!0,preserveScroll:!0})},Ie=async l=>{var t,d;try{U.value=l.path,D.value=0;const g=await q.post(route("files.folder-download-urls",{bucket:s.activeBucket.id}),{folder_path:l.path}),{files:b,folder_name:i,total_size:w,file_count:qe}=g.data;if(b.length===0){alert("This folder is empty.");return}const pe=await Promise.all(b.map(async(Q,Oe)=>{const Ke=await fetch(Q.url);return D.value=Math.round((Oe+1)/b.length*100),{name:Q.path,input:Ke}})),J=await Ht(pe).blob(),R=document.createElement("a");R.href=URL.createObjectURL(J),R.download=`${i}.zip`,R.click(),URL.revokeObjectURL(R.href)}catch(g){console.error("Failed to download folder:",g),alert("Failed to download folder: "+(((d=(t=g.response)==null?void 0:t.data)==null?void 0:d.error)||g.message))}finally{U.value=null,D.value=0}},Se=l=>{if(l===0)return"0 Bytes";const t=1024,d=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(l)/Math.log(t));return parseFloat((l/Math.pow(t,g)).toFixed(2))+" "+d[g]},ie=async()=>{var l,t;if(h.value.trim()){k.value=!0;try{await q.post(route("files.create-folder",{bucket:s.activeBucket.id}),{folder_name:h.value.trim(),prefix:s.currentPath}),x.value=!1,h.value="",I.reload({only:["files","folders"]})}catch(d){console.error("Failed to create folder:",d),alert("Failed to create folder: "+(((t=(l=d.response)==null?void 0:l.data)==null?void 0:t.error)||d.message))}finally{k.value=!1}}},re=l=>{F.value=l,z.value=l.name,j.value=!0},de=async()=>{var l,t;if(!z.value.trim()||z.value===F.value.name){j.value=!1;return}P.value=!0;try{await q.post(route("files.rename",{bucket:s.activeBucket.id}),{old_path:F.value.path,new_name:z.value.trim(),is_folder:F.value.type==="folder"}),j.value=!1,F.value=null,z.value="",I.reload({only:["files","folders"]})}catch(d){console.error("Failed to rename:",d),alert("Failed to rename: "+(((t=(l=d.response)==null?void 0:l.data)==null?void 0:t.error)||d.message))}finally{P.value=!1}},ue=l=>{f.value.has(l.path)?f.value.delete(l.path):f.value.add(l.path),f.value=new Set(f.value)},Le=()=>{const l=s.files.length+s.folders.length;if(f.value.size===l)f.value.clear();else{const t=[...s.files.map(d=>d.path),...s.folders.map(d=>d.path)];f.value=new Set(t)}},He=async()=>{if(f.value.size!==0&&confirm(`Are you sure you want to delete ${f.value.size} item(s)?`)){M.value=!0;for(const l of f.value)await I.delete(route("files.destroy",{bucket:s.activeBucket.id,key:l}),{preserveState:!1,preserveScroll:!0});f.value.clear(),M.value=!1,I.reload()}},T=l=>{const t=l.split(".").pop().toLowerCase();return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",avi:"video",mkv:"video",mov:"video",wmv:"video",webm:"video",pdf:"pdf",doc:"word",docx:"word",xls:"excel",xlsx:"excel",csv:"excel",ppt:"powerpoint",pptx:"powerpoint",txt:"text",log:"text",md:"text",zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",js:"code",ts:"code",jsx:"code",tsx:"code",py:"code",java:"code",cpp:"code",c:"code",h:"code",hpp:"code",html:"code",css:"code",scss:"code",sass:"code",less:"code",json:"code",xml:"code",yaml:"code",yml:"code",php:"code",rb:"code",go:"code",rs:"code",swift:"code",sql:"code",sh:"code",bash:"code",ps1:"code",bat:"code",vue:"code",jsx:"code",tsx:"code",env:"code",gitignore:"code",dockerfile:"code"}[t]||"file"},G=l=>{const t=l.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","svg","webp","bmp","mp4","webm","mov","avi","mkv","mp3","wav","ogg","m4a","flac","pdf","txt","log","md","js","ts","jsx","tsx","css","scss","sass","html","xml","json","php","py","java","c","cpp","h","sql","sh","yml","yaml"].includes(t)},Pe=l=>{l.preventDefault(),l.stopPropagation(),$.value++,m.value=!0},Te=l=>{l.preventDefault(),l.stopPropagation(),$.value--,$.value===0&&(m.value=!1)},Ne=l=>{l.preventDefault(),l.stopPropagation()},Ee=async l=>{l.preventDefault(),l.stopPropagation(),m.value=!1,$.value=0;const t=Array.from(l.dataTransfer.items),d=[];for(const g of t)if(g.kind==="file"){const b=g.webkitGetAsEntry?g.webkitGetAsEntry():g.getAsEntry();if(b)await ce(b,d);else{const i=g.getAsFile();i&&d.push({file:i,path:i.name})}}d.length>0&&await Re(d)},ce=async(l,t,d="")=>{if(l.isFile){const g=await new Promise(b=>l.file(b));t.push({file:g,path:d+g.name})}else if(l.isDirectory){const g=l.createReader(),b=await new Promise(i=>{g.readEntries(i)});for(const i of b)await ce(i,t,d+l.name+"/")}},Re=async l=>{c.value=l.length,v.value=0,r.value=0,a.value=!0;let t=0,d=[];for(const{file:g,path:b}of l)try{await le(g,b),t++,v.value++,r.value=Math.round(v.value/c.value*100)}catch{d.push(b),v.value++,r.value=Math.round(v.value/c.value*100)}a.value=!1,r.value=0,f.value.clear(),t>0?I.reload({only:["files","folders"],onSuccess:()=>{d.length>0&&alert(`${t} file(s) uploaded successfully. Failed to upload: ${d.join(", ")}`)}}):d.length>0&&alert(`Failed to upload: ${d.join(", ")}`)};return(l,t)=>(u(),p(Y,null,[A(W(Qe),{title:"Files"}),A(We,null,{header:V(()=>[e("div",Tt,[e("div",null,[t[13]||(t[13]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Files ",-1)),e("p",Nt," Browsing: "+B(o.activeBucket.name)+" ("+B(o.activeBucket.provider)+") ",1)]),e("div",Et,[A(oe,{onClick:t[0]||(t[0]=d=>x.value=!0)},{default:V(()=>t[14]||(t[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),S(" New Folder ",-1)])),_:1,__:[14]}),A(te,{onClick:ne,disabled:a.value},{default:V(()=>[a.value?L("",!0):(u(),p("svg",Rt,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)]))),a.value?(u(),p("span",qt,"Uploading... "+B(r.value)+"%",1)):(u(),p("span",Ot,"Upload"))]),_:1},8,["disabled"]),f.value.size>0?(u(),Z(Xe,{key:0,onClick:He,disabled:M.value},{default:V(()=>[t[16]||(t[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),S(" Delete Selected ("+B(f.value.size)+") ",1)]),_:1,__:[16]},8,["disabled"])):L("",!0)])])]),default:V(()=>{var d,g,b;return[e("div",{class:"py-12 min-h-screen",onDragenter:N(Pe,["prevent"]),onDragleave:N(Te,["prevent"]),onDragover:N(Ne,["prevent"]),onDrop:N(Ee,["prevent"])},[m.value?(u(),p("div",Kt,t[17]||(t[17]=[e("div",{class:"text-center"},[e("svg",{class:"mx-auto h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mt-2 text-lg font-medium text-indigo-900"},"Drop files or folders here"),e("p",{class:"text-sm text-indigo-700"},"Files will be uploaded to the current folder")],-1)]))):L("",!0),e("div",Gt,[e("div",Yt,[e("div",Zt,[e("nav",Jt,[A(W(me),{href:l.route("files.index",{bucket:o.activeBucket.id}),class:"text-gray-600 hover:text-gray-900"},{default:V(()=>[S(B(o.activeBucket.name),1)]),_:1},8,["href"]),(u(!0),p(Y,null,X(o.breadcrumb,(i,w)=>(u(),p(Y,{key:w},[t[18]||(t[18]=e("span",{class:"text-gray-400"},"/",-1)),A(W(me),{href:l.route("files.index",{bucket:o.activeBucket.id,prefix:i.path}),class:"text-gray-600 hover:text-gray-900"},{default:V(()=>[S(B(i.name),1)]),_:2},1032,["href"])],64))),128))])]),e("div",Qt,[o.files.length===0&&o.folders.length===0?(u(),p("div",Wt,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No files",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"This folder is empty.",-1)),e("div",{class:"mt-6"},[t[19]||(t[19]=e("p",{class:"text-sm text-gray-500"}," Drag and drop files or folders here, or ",-1)),e("button",{onClick:ne,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500"}," browse to upload ")])])):(u(),p("div",Xt,[e("table",eo,[e("thead",to,[e("tr",null,[e("th",oo,[e("input",{type:"checkbox",onChange:Le,checked:o.files.length+o.folders.length>0&&f.value.size===o.files.length+o.folders.length,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,so)]),t[23]||(t[23]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name ",-1)),t[24]||(t[24]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Size ",-1)),t[25]||(t[25]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Modified ",-1)),t[26]||(t[26]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",no,[o.currentPath?(u(),p("tr",{key:0,class:"hover:bg-gray-50 cursor-pointer",onClick:je},t[27]||(t[27]=[e("td",{class:"px-6 py-4"},null,-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),S(" .. ")])],-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},null,-1)]))):L("",!0),(u(!0),p(Y,null,X(o.folders,i=>(u(),p("tr",{key:i.path,class:"hover:bg-gray-50"},[e("td",lo,[e("input",{type:"checkbox",checked:f.value.has(i.path),onChange:w=>ue(i),onClick:t[1]||(t[1]=N(()=>{},["stop"])),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,ao)]),e("td",io,[e("div",ro,[e("button",{onClick:w=>Ue(i.path),class:"flex items-center hover:text-indigo-600"},[t[28]||(t[28]=e("svg",{class:"h-5 w-5 text-blue-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",co,B(i.name),1)],8,uo),e("button",{onClick:N(w=>re(i),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},[(u(),p("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":j.value&&F.value===i?2.5:2,onMouseover:t[2]||(t[2]=w=>w.currentTarget.querySelector("path").setAttribute("stroke-width","2.5")),onMouseleave:t[3]||(t[3]=w=>w.currentTarget.querySelector("path").setAttribute("stroke-width","2"))},t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)]),40,vo))],8,po)])]),t[35]||(t[35]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),t[36]||(t[36]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),e("td",fo,[e("div",mo,[t[34]||(t[34]=e("div",{class:"relative group"},[e("button",{disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Preview not available ")],-1)),e("div",ho,[e("button",{onClick:w=>Ie(i),disabled:U.value===i.path,class:ee(["p-1.5 transition-colors rounded-md",U.value===i.path?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"])},[U.value!==i.path?(u(),p("svg",wo,t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))):(u(),p("svg",xo,t[31]||(t[31]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])))],10,go),e("span",yo,B(U.value===i.path?`Downloading... ${D.value}%`:"Download as ZIP"),1)]),e("div",ko,[e("button",{onClick:w=>De(i),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[32]||(t[32]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,bo),t[33]||(t[33]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete Folder ",-1))])])])]))),128)),(u(!0),p(Y,null,X(o.files,i=>(u(),p("tr",{key:i.path,class:"hover:bg-gray-50"},[e("td",Bo,[e("input",{type:"checkbox",checked:f.value.has(i.path),onChange:w=>ue(i),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Co)]),e("td",Mo,[e("div",_o,[e("button",{onClick:w=>G(i.name)?ae(i):null,class:ee(["flex items-center",G(i.name)?"hover:text-indigo-600 cursor-pointer":"cursor-default"])},[T(i.name)==="image"?(u(),p("svg",jo,t[37]||(t[37]=[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"},null,-1)]))):T(i.name)==="video"?(u(),p("svg",Fo,t[38]||(t[38]=[e("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},null,-1)]))):T(i.name)==="pdf"?(u(),p("svg",zo,t[39]||(t[39]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17h6M9 13h6M9 9h4"},null,-1)]))):T(i.name)==="excel"?(u(),p("svg",$o,t[40]||(t[40]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z","clip-rule":"evenodd"},null,-1)]))):T(i.name)==="word"?(u(),p("svg",Vo,t[41]||(t[41]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 4a1 1 0 011 1v1h2V7a1 1 0 112 0v6a1 1 0 11-2 0v-2H9v2a1 1 0 11-2 0V7a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]))):T(i.name)==="archive"?(u(),p("svg",Ao,t[42]||(t[42]=[e("path",{d:"M2 6a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M2 12a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm6 1a1 1 0 100 2h4a1 1 0 100-2H8z","clip-rule":"evenodd"},null,-1)]))):T(i.name)==="code"?(u(),p("svg",Do,t[43]||(t[43]=[e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):T(i.name)==="text"?(u(),p("svg",Io,t[44]||(t[44]=[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0h8v12H6V4z","clip-rule":"evenodd"},null,-1),e("path",{d:"M8 7h4v2H8V7zm0 4h4v2H8v-2z"},null,-1)]))):(u(),p("svg",So,t[45]||(t[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e("span",{class:ee(G(i.name)?"hover:underline":"")},B(i.name),3)],10,Uo),e("button",{onClick:N(w=>re(i),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},[(u(),p("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":j.value&&F.value===i?2.5:2,onMouseover:t[4]||(t[4]=w=>w.currentTarget.querySelector("path").setAttribute("stroke-width","2.5")),onMouseleave:t[5]||(t[5]=w=>w.currentTarget.querySelector("path").setAttribute("stroke-width","2"))},t[46]||(t[46]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)]),40,Ho))],8,Lo)])]),e("td",Po,B(Se(i.size)),1),e("td",To,B(i.last_modified),1),e("td",No,[e("div",Eo,[e("div",Ro,[G(i.name)?(u(),p("button",{key:0,onClick:w=>ae(i),class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-colors"},t[47]||(t[47]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,qo)):(u(),p("button",Oo,t[48]||(t[48]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]))),e("span",Ko,B(G(i.name)?"Preview":"Preview not available"),1)]),e("div",Go,[e("button",{onClick:w=>ze(i),class:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors"},t[49]||(t[49]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)]),8,Yo),t[50]||(t[50]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Download ",-1))]),e("div",Zo,[e("button",{onClick:w=>Ae(i),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[51]||(t[51]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Jo),t[52]||(t[52]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete ",-1))])])])]))),128))])])]))])])])],32),e("input",{ref_key:"fileInput",ref:n,type:"file",multiple:"",onChange:Fe,class:"hidden"},null,544),A(_t,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=i=>C.value=i),file:_.value,"bucket-id":o.activeBucket.id,onNavigatePrev:$e,onNavigateNext:Ve},null,8,["modelValue","file","bucket-id"]),(u(),Z(he,{to:"body"},[x.value?(u(),p("div",Qo,[e("div",Wo,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[7]||(t[7]=i=>x.value=!1)},t[53]||(t[53]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[57]||(t[57]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Xo,[e("div",es,[e("div",ts,[t[55]||(t[55]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1)),e("div",os,[t[54]||(t[54]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Create New Folder ",-1)),e("div",ss,[ge(e("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>h.value=i),onKeyup:we(ie,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Folder name",disabled:k.value},null,40,ns),[[xe,h.value]])])])])]),e("div",ls,[A(te,{onClick:ie,disabled:!h.value.trim()||k.value,class:"w-full sm:ml-3 sm:w-auto"},{default:V(()=>[S(B(k.value?"Creating...":"Create"),1)]),_:1},8,["disabled"]),A(oe,{onClick:t[9]||(t[9]=i=>{x.value=!1,h.value=""}),disabled:k.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:V(()=>t[56]||(t[56]=[S(" Cancel ",-1)])),_:1,__:[56]},8,["disabled"])])])])])):L("",!0)])),(u(),Z(he,{to:"body"},[j.value?(u(),p("div",as,[e("div",is,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[10]||(t[10]=i=>j.value=!1)},t[58]||(t[58]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[61]||(t[61]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",rs,[e("div",ds,[e("div",us,[t[59]||(t[59]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",cs,[e("h3",ps," Rename "+B(((d=F.value)==null?void 0:d.type)==="folder"?"Folder":"File"),1),e("div",vs,[ge(e("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>z.value=i),onKeyup:we(de,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:(g=F.value)==null?void 0:g.name,disabled:P.value},null,40,fs),[[xe,z.value]])])])])]),e("div",ms,[A(te,{onClick:de,disabled:!z.value.trim()||z.value===((b=F.value)==null?void 0:b.name)||P.value,class:"w-full sm:ml-3 sm:w-auto"},{default:V(()=>[S(B(P.value?"Renaming...":"Rename"),1)]),_:1},8,["disabled"]),A(oe,{onClick:t[12]||(t[12]=i=>{j.value=!1,F.value=null,z.value=""}),disabled:P.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:V(()=>t[60]||(t[60]=[S(" Cancel ",-1)])),_:1,__:[60]},8,["disabled"])])])])])):L("",!0)]))]}),_:1})],64))}};export{bs as default};
