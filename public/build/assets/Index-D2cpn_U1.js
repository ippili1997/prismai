import{m as ot,p as y,j as ye,s as ke,x as st,y as lt,c as Z,o as u,w as j,g as c,i as D,b as e,t as k,f as $,e as N,T as nt,z as R,a as A,d as ie,h as at,l as be,F as Y,q as se,n as ee,A as re,k as Ce,B as Be,C as Me,D as it,E as S}from"./app-Ch5SySki.js";import{_ as rt}from"./AuthenticatedLayout-Bnl8BkXm.js";import{P as le}from"./PrimaryButton-owo-aHhr.js";import{_ as te,D as dt}from"./DangerButton-BuFbMleW.js";import{_ as ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-lpkDCvAR.js";const ct={key:0,class:"fixed inset-0 z-50 overflow-hidden"},vt={class:"relative flex items-center"},pt={class:"bg-white rounded-lg shadow-xl max-w-6xl max-h-[90vh] w-full min-w-[800px] overflow-hidden"},ft={class:"flex items-center justify-between p-4 border-b"},mt={class:"text-lg font-semibold text-gray-900"},ht={class:"text-sm text-gray-500"},gt={class:"flex items-center gap-2"},xt=["href"],wt={class:"relative overflow-auto bg-gray-50 min-h-[600px] h-[calc(90vh-8rem)]"},yt={key:0,class:"flex items-center justify-center h-full"},kt={key:1,class:"flex items-center justify-center h-full"},bt={class:"text-center"},Ct={class:"mt-2 text-sm text-gray-600"},Bt={key:2,class:"flex items-center justify-center h-full"},Mt={key:3,class:"h-full min-h-[600px]"},_t={key:0,class:"h-full min-h-[600px] flex items-center justify-center p-4"},jt=["src","alt"],zt=["src"],Ft={key:2,class:"h-full flex items-center justify-center bg-black"},Ut=["src"],$t={key:3,class:"h-full flex items-center justify-center"},Vt=["src"],At={key:4,class:"h-full overflow-auto"},It={class:"bg-white p-4 text-sm font-mono whitespace-pre-wrap break-words"},Dt=ot({__name:"FileViewer",props:{file:{},bucketId:{},modelValue:{type:Boolean}},emits:["update:modelValue","navigate-prev","navigate-next"],setup(o,{emit:s}){const l=o,i=s,d=y(!0),p=y(""),f=y(""),v=y(""),M=y(!1),B=ye(()=>{var b;if(!l.file)return"unknown";const w=((b=l.file.name.split(".").pop())==null?void 0:b.toLowerCase())||"";return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",webm:"video",mov:"video",avi:"video",mkv:"video",mp3:"audio",wav:"audio",ogg:"audio",m4a:"audio",flac:"audio",pdf:"pdf",txt:"text",log:"text",md:"text",js:"code",ts:"code",jsx:"code",tsx:"code",css:"code",scss:"code",sass:"code",html:"code",xml:"code",json:"code",php:"code",py:"code",java:"code",c:"code",cpp:"code",h:"code",sql:"code",sh:"code",yml:"code",yaml:"code"}[w]||"unknown"}),_=ye(()=>["image","video","audio","pdf","text","code"].includes(B.value)),m=async()=>{var w,g;if(!(!l.file||!l.modelValue)){if(d.value=!0,p.value="",f.value="",v.value="",M.value=!1,!_.value){d.value=!1;return}try{const b=await R.post(route("files.view-url",{bucket:l.bucketId}),{key:l.file.path});b.data.is_text&&b.data.content?(v.value=b.data.content,M.value=!0):(f.value=b.data.view_url,M.value=!1)}catch(b){console.error("Failed to load view URL:",b),p.value=((g=(w=b.response)==null?void 0:w.data)==null?void 0:g.error)||"Failed to load file preview"}finally{d.value=!1}}};ke(()=>l.modelValue,w=>{w&&l.file&&m()}),ke(()=>l.file,w=>{w&&l.modelValue&&m()});const I=()=>{i("update:modelValue",!1),f.value="",v.value="",p.value="",M.value=!1},z=w=>{l.modelValue&&(w.key==="Escape"?I():w.key==="ArrowLeft"?i("navigate-prev"):w.key==="ArrowRight"&&i("navigate-next"))};st(()=>{window.addEventListener("keydown",z)}),lt(()=>{window.removeEventListener("keydown",z)});const L=w=>{if(w===0)return"0 Bytes";const g=1024,b=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(w)/Math.log(g));return parseFloat((w/Math.pow(g,F)).toFixed(2))+" "+b[F]};return(w,g)=>(u(),Z(nt,{name:"modal"},{default:j(()=>{var b,F,U,V;return[w.modelValue?(u(),c("div",ct,[e("div",{class:"absolute inset-0 bg-black bg-opacity-75 cursor-pointer",onClick:I}),e("div",{class:"relative h-full flex items-center justify-center p-4",onClick:N(I,["self"])},[e("div",vt,[e("button",{onClick:g[0]||(g[0]=T=>w.$emit("navigate-prev")),class:"absolute -left-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Previous file (←)"},g[2]||(g[2]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("button",{onClick:g[1]||(g[1]=T=>w.$emit("navigate-next")),class:"absolute -right-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Next file (→)"},g[3]||(g[3]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),e("div",pt,[e("div",ft,[e("div",null,[e("h3",mt,k((b=w.file)==null?void 0:b.name),1),e("p",ht,k(L(((F=w.file)==null?void 0:F.size)||0)),1)]),e("div",gt,[e("a",{href:w.route("files.download",{bucket:w.bucketId,key:(U=w.file)==null?void 0:U.path}),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},g[4]||(g[4]=[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),$(" Download ",-1)]),8,xt),e("button",{onClick:I,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},g[5]||(g[5]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",wt,[d.value?(u(),c("div",yt,g[6]||(g[6]=[e("div",{class:"text-center"},[e("svg",{class:"animate-spin h-10 w-10 text-gray-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading preview...")],-1)]))):p.value?(u(),c("div",kt,[e("div",bt,[g[7]||(g[7]=e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("p",Ct,k(p.value),1)])])):_.value?f.value||v.value?(u(),c("div",Mt,[B.value==="image"?(u(),c("div",_t,[e("img",{src:f.value,alt:(V=w.file)==null?void 0:V.name,class:"max-w-full max-h-full object-contain"},null,8,jt)])):B.value==="pdf"?(u(),c("iframe",{key:1,src:f.value,class:"w-full h-full min-h-[600px]",frameborder:"0"},null,8,zt)):B.value==="video"?(u(),c("div",Ft,[e("video",{src:f.value,controls:"",class:"max-w-full max-h-full"}," Your browser does not support the video tag. ",8,Ut)])):B.value==="audio"?(u(),c("div",$t,[e("audio",{src:f.value,controls:"",class:"w-full max-w-md"}," Your browser does not support the audio tag. ",8,Vt)])):(B.value==="text"||B.value==="code")&&M.value?(u(),c("div",At,[e("pre",It,[e("code",null,k(v.value),1)])])):D("",!0)])):D("",!0):(u(),c("div",Bt,g[8]||(g[8]=[e("div",{class:"text-center"},[e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"This file type cannot be previewed"),e("p",{class:"mt-1 text-xs text-gray-500"},"Please download the file to view it")],-1)])))])])])])])):D("",!0)]}),_:1}))}}),St=ut(Dt,[["__scopeId","data-v-62055ee5"]]);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(o,s,l){const i=Number(0xffffffffn&s),d=Number(s>>32n);this.setUint32(o+(l?0:4),i,l),this.setUint32(o+(l?4:0),d,l)}});var Q=o=>new DataView(new ArrayBuffer(o)),P=o=>new Uint8Array(o.buffer||o),J=o=>new TextEncoder().encode(String(o)),K=o=>Math.min(4294967295,Number(o)),_e=o=>Math.min(65535,Number(o));function Lt(o,s,l){s===void 0||s instanceof Date||(s=new Date(s));const i=o!==void 0;if(l||(l=i?436:509),o instanceof File)return{isFile:i,t:s||new Date(o.lastModified),bytes:o.stream(),mode:l};if(o instanceof Response)return{isFile:i,t:s||new Date(o.headers.get("Last-Modified")||Date.now()),bytes:o.body,mode:l};if(s===void 0)s=new Date;else if(isNaN(s))throw new Error("Invalid modification date.");if(!i)return{isFile:i,t:s,mode:l};if(typeof o=="string")return{isFile:i,t:s,bytes:J(o),mode:l};if(o instanceof Blob)return{isFile:i,t:s,bytes:o.stream(),mode:l};if(o instanceof Uint8Array||o instanceof ReadableStream)return{isFile:i,t:s,bytes:o,mode:l};if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))return{isFile:i,t:s,bytes:P(o),mode:l};if(Symbol.asyncIterator in o)return{isFile:i,t:s,bytes:ze(o[Symbol.asyncIterator]()),mode:l};throw new TypeError("Unsupported input format.")}function ze(o,s=o){return new ReadableStream({async pull(l){let i=0;for(;l.desiredSize>i;){const d=await o.next();if(!d.value){l.close();break}{const p=Ht(d.value);l.enqueue(p),i+=p.byteLength}}},cancel(l){var i;(i=s.throw)==null||i.call(s,l)}})}function Ht(o){return typeof o=="string"?J(o):o instanceof Uint8Array?o:P(o)}function Fe(o,s,l){let[i,d]=function(p){return p?p instanceof Uint8Array?[p,1]:ArrayBuffer.isView(p)||p instanceof ArrayBuffer?[P(p),1]:[J(p),0]:[void 0,0]}(s);if(o instanceof File)return{i:de(i||J(o.name)),o:BigInt(o.size),u:d};if(o instanceof Response){const p=o.headers.get("content-disposition"),f=p&&p.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),v=f&&f[1]||o.url&&new URL(o.url).pathname.split("/").findLast(Boolean),M=v&&decodeURIComponent(v),B=l||+o.headers.get("content-length");return{i:de(i||J(M)),o:BigInt(B),u:d}}return i=de(i,o!==void 0||l!==void 0),typeof o=="string"?{i,o:BigInt(J(o).length),u:d}:o instanceof Blob?{i,o:BigInt(o.size),u:d}:o instanceof ArrayBuffer||ArrayBuffer.isView(o)?{i,o:BigInt(o.byteLength),u:d}:{i,o:Pt(o,l),u:d}}function Pt(o,s){return s>-1?BigInt(s):o?void 0:0n}function de(o,s=1){if(!o||o.every(l=>l===47))throw new Error("The file must have a name.");if(s)for(;o[o.length-1]===47;)o=o.subarray(0,-1);else o[o.length-1]!==47&&(o=new Uint8Array([...o,47]));return o}var Ue=new Uint32Array(256);for(let o=0;o<256;++o){let s=o;for(let l=0;l<8;++l)s=s>>>1^(1&s&&3988292384);Ue[o]=s}function je(o,s=0){s=~s;for(var l=0,i=o.length;l<i;l++)s=s>>>8^Ue[255&s^o[l]];return~s>>>0}function $e(o,s,l=0){const i=o.getSeconds()>>1|o.getMinutes()<<5|o.getHours()<<11,d=o.getDate()|o.getMonth()+1<<5|o.getFullYear()-1980<<9;s.setUint16(l,i,1),s.setUint16(l+2,d,1)}function Tt({i:o,u:s},l){return 8*(!s||(l??function(i){try{Et.decode(i)}catch{return 0}return 1}(o)))}var Et=new TextDecoder("utf8",{fatal:1});function Nt(o,s=0){const l=Q(30);return l.setUint32(0,1347093252),l.setUint32(4,754976768|s),$e(o.t,l,10),l.setUint16(26,o.i.length,1),P(l)}async function*Rt(o){let{bytes:s}=o;if("then"in s&&(s=await s),s instanceof Uint8Array)yield s,o.l=je(s,0),o.o=BigInt(s.length);else{o.o=0n;const l=s.getReader();for(;;){const{value:i,done:d}=await l.read();if(d)break;o.l=je(i,o.l),o.o+=BigInt(i.length),yield i}}}function qt(o,s){const l=Q(16+(s?8:0));return l.setUint32(0,1347094280),l.setUint32(4,o.isFile?o.l:0,1),s?(l.setBigUint64(8,o.o,1),l.setBigUint64(16,o.o,1)):(l.setUint32(8,K(o.o),1),l.setUint32(12,K(o.o),1)),P(l)}function Ot(o,s,l=0,i=0){const d=Q(46);return d.setUint32(0,1347092738),d.setUint32(4,755182848),d.setUint16(8,2048|l),$e(o.t,d,12),d.setUint32(16,o.isFile?o.l:0,1),d.setUint32(20,K(o.o),1),d.setUint32(24,K(o.o),1),d.setUint16(28,o.i.length,1),d.setUint16(30,i,1),d.setUint16(40,o.mode|(o.isFile?32768:16384),1),d.setUint32(42,K(s),1),P(d)}function Kt(o,s,l){const i=Q(l);return i.setUint16(0,1,1),i.setUint16(2,l-4,1),16&l&&(i.setBigUint64(4,o.o,1),i.setBigUint64(12,o.o,1)),i.setBigUint64(l-8,s,1),P(i)}function Ve(o){return o instanceof File||o instanceof Response?[[o],[o]]:[[o.input,o.name,o.size],[o.input,o.lastModified,o.mode]]}var Gt=o=>function(s){let l=BigInt(22),i=0n,d=0;for(const p of s){if(!p.i)throw new Error("Every file must have a non-empty name.");if(p.o===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(p.i)}".`);const f=p.o>=0xffffffffn,v=i>=0xffffffffn;i+=BigInt(46+p.i.length+(f&&8))+p.o,l+=BigInt(p.i.length+46+(12*v|28*f)),d||(d=f)}return(d||i>=0xffffffffn)&&(l+=BigInt(76)),l+i}(function*(s){for(const l of s)yield Fe(...Ve(l)[0])}(o));function Yt(o,s={}){const l={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof s.length=="bigint"||Number.isInteger(s.length))&&s.length>0&&(l["Content-Length"]=String(s.length)),s.metadata&&(l["Content-Length"]=String(Gt(s.metadata))),new Response(Zt(o,s),{headers:l})}function Zt(o,s={}){const l=function(i){var p;const d=i[Symbol.iterator in i?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const f=await d.next();if(f.done)return f;const[v,M]=Ve(f.value);return{done:0,value:Object.assign(Lt(...M),Fe(...v))}},throw:(p=d.throw)==null?void 0:p.bind(d),[Symbol.asyncIterator](){return this}}}(o);return ze(async function*(i,d){const p=[];let f=0n,v=0n,M=0;for await(const m of i){const I=Tt(m,d.buffersAreUTF8);yield Nt(m,I),yield new Uint8Array(m.i),m.isFile&&(yield*Rt(m));const z=m.o>=0xffffffffn,L=12*(f>=0xffffffffn)|28*z;yield qt(m,z),p.push(Ot(m,f,I,L)),p.push(m.i),L&&p.push(Kt(m,f,L)),z&&(f+=8n),v++,f+=BigInt(46+m.i.length)+m.o,M||(M=z)}let B=0n;for(const m of p)yield m,B+=BigInt(m.length);if(M||f>=0xffffffffn){const m=Q(76);m.setUint32(0,1347094022),m.setBigUint64(4,BigInt(44),1),m.setUint32(12,755182848),m.setBigUint64(24,v,1),m.setBigUint64(32,v,1),m.setBigUint64(40,B,1),m.setBigUint64(48,f,1),m.setUint32(56,1347094023),m.setBigUint64(64,f+B,1),m.setUint32(72,1,1),yield P(m)}const _=Q(22);_.setUint32(0,1347093766),_.setUint16(8,_e(v),1),_.setUint16(10,_e(v),1),_.setUint32(12,K(B),1),_.setUint32(16,K(f),1),yield P(_)}(l,s),l)}const Jt={class:"flex items-center justify-between"},Qt={class:"text-sm text-gray-600 mt-1"},Wt={class:"flex items-center space-x-2"},Xt={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},eo={key:1},to={key:2},oo={key:0,class:"fixed inset-0 z-50 bg-indigo-50 bg-opacity-90 flex items-center justify-center pointer-events-none"},so={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},lo={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative"},no={class:"p-4 border-b border-gray-200"},ao={class:"flex items-center space-x-2 text-sm"},io={class:"p-6"},ro={key:0,class:"text-center py-12"},uo={key:1,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},co={class:"min-w-full divide-y divide-gray-300"},vo={class:"bg-gray-50"},po={scope:"col",class:"w-12 px-6 py-3"},fo=["checked"],mo={class:"bg-white divide-y divide-gray-200"},ho={class:"px-6 py-4"},go=["checked","onChange"],xo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},wo={class:"flex items-center group"},yo=["onClick"],ko={class:"hover:underline"},bo=["onClick"],Co=["stroke-width"],Bo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Mo={class:"flex items-center space-x-2"},_o={class:"relative group"},jo=["onClick","disabled"],zo={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Fo={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Uo={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},$o={class:"relative group"},Vo=["onClick"],Ao={class:"px-6 py-4"},Io=["checked","onChange"],Do={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},So={class:"flex items-center group"},Lo=["onClick"],Ho={key:0,class:"h-5 w-5 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Po={key:1,class:"h-5 w-5 text-purple-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},To={key:2,class:"h-5 w-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Eo={key:3,class:"h-5 w-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},No={key:4,class:"h-5 w-5 text-blue-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ro={key:5,class:"h-5 w-5 text-yellow-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},qo={key:6,class:"h-5 w-5 text-indigo-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Oo={key:7,class:"h-5 w-5 text-gray-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ko={key:8,class:"h-5 w-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Go=["onClick"],Yo=["stroke-width"],Zo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Wo={class:"flex items-center space-x-2"},Xo={class:"relative group"},es=["onClick"],ts={key:1,disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},os={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},ss={class:"relative group"},ls=["onClick"],ns={class:"relative group"},as=["onClick"],is={key:0,class:"fixed inset-0 overflow-y-auto z-50"},rs={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ds={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},us={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},cs={class:"sm:flex sm:items-start"},vs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},ps={class:"mt-4"},fs=["disabled"],ms={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},hs={key:0,class:"fixed inset-0 overflow-y-auto z-50"},gs={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},ws={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ys={class:"sm:flex sm:items-start"},ks={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},bs={class:"text-lg leading-6 font-medium text-gray-900"},Cs={class:"mt-4"},Bs=["placeholder","disabled"],Ms={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},_s={key:0,class:"fixed inset-0 overflow-y-auto z-50"},js={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},zs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Fs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Us={class:"sm:flex sm:items-start"},$s={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},Vs={class:"text-lg leading-6 font-medium text-gray-900"},As={class:"mt-4"},Is={key:0,class:"text-center py-4"},Ds={key:1,class:"max-h-64 overflow-y-auto border border-gray-300 rounded-md"},Ss={class:"text-sm"},Ls=["onClick"],Hs={class:"text-sm"},Ps={key:2,class:"mt-2 text-sm text-gray-600"},Ts={class:"font-medium"},Es={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ys={__name:"Index",props:{files:Array,folders:Array,activeBucket:Object,currentPath:String,breadcrumb:Array},setup(o){const s=o,l=y(null),i=y(!1),d=y(0),p=y(0),f=y(0),v=y(new Set),M=y(!1),B=y(!1),_=y(null),m=y(!1),I=y(0),z=y(null),L=y(0),w=y(!1),g=y(""),b=y(!1),F=y(!1),U=y(null),V=y(""),T=y(!1),W=y(!1),q=y([]),H=y(""),O=y(!1),ue=y([]),oe=y(!1),Ae=n=>{S.get(route("files.index",{bucket:s.activeBucket.id,prefix:n}))},Ie=()=>{if(s.currentPath){const n=s.currentPath.split("/").filter(r=>r);n.pop();const t=n.length>0?n.join("/")+"/":"";S.get(route("files.index",{bucket:s.activeBucket.id,prefix:t}))}},ce=()=>{l.value.click()},De=async n=>{const t=Array.from(n.target.files);if(t.length===0)return;p.value=t.length,f.value=0,d.value=0,i.value=!0;let r=0,x=[];for(const C of t)try{await ve(C),r++,f.value++,d.value=Math.round(f.value/p.value*100)}catch{x.push(C.name),f.value++,d.value=Math.round(f.value/p.value*100)}n.target.value="",i.value=!1,d.value=0,v.value.clear(),r>0?S.reload({only:["files","folders"],onSuccess:()=>{x.length>0&&alert(`${r} file(s) uploaded successfully. Failed to upload: ${x.join(", ")}`)}}):x.length>0&&alert(`Failed to upload: ${x.join(", ")}`)},ve=async(n,t="")=>{var r,x,C,a;try{const h=t||n.name,Xe=h.split("/").pop(),we=h.substring(0,h.lastIndexOf("/")),ne=await R.post(route("files.upload-url",{bucket:s.activeBucket.id}),{filename:h,content_type:n.type||"application/octet-stream",prefix:s.currentPath}),{upload_url:G,key:ae}=ne.data;await R.put(G,n,{headers:{"Content-Type":n.type||"application/octet-stream"}})}catch(h){throw console.error("Upload failed:",h),console.error("Error details:",h.response),alert("Upload error: "+(((x=(r=h.response)==null?void 0:r.data)==null?void 0:x.error)||((a=(C=h.response)==null?void 0:C.data)==null?void 0:a.message)||h.message)),h}},Se=n=>{window.location.href=route("files.download",{bucket:s.activeBucket.id,key:n.path})},pe=n=>{_.value=n,B.value=!0},Le=()=>{const n=s.files.findIndex(t=>{var r;return t.path===((r=_.value)==null?void 0:r.path)});n>0&&(_.value=s.files[n-1])},He=()=>{const n=s.files.findIndex(t=>{var r;return t.path===((r=_.value)==null?void 0:r.path)});n<s.files.length-1&&(_.value=s.files[n+1])},Pe=n=>{confirm(`Are you sure you want to delete ${n.name}?`)&&S.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n.path}),{preserveState:!0,preserveScroll:!0})},Te=n=>{confirm(`Are you sure you want to delete the folder "${n.name}" and all its contents?`)&&S.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n.path}),{preserveState:!0,preserveScroll:!0})},Ee=async n=>{var t,r;try{z.value=n.path,L.value=0;const x=await R.post(route("files.folder-download-urls",{bucket:s.activeBucket.id}),{folder_path:n.path}),{files:C,folder_name:a,total_size:h,file_count:Xe}=x.data;if(C.length===0){alert("This folder is empty.");return}const we=await Promise.all(C.map(async(ae,et)=>{const tt=await fetch(ae.url);return L.value=Math.round((et+1)/C.length*100),{name:ae.path,input:tt}})),ne=await Yt(we).blob(),G=document.createElement("a");G.href=URL.createObjectURL(ne),G.download=`${a}.zip`,G.click(),URL.revokeObjectURL(G.href)}catch(x){console.error("Failed to download folder:",x),alert("Failed to download folder: "+(((r=(t=x.response)==null?void 0:t.data)==null?void 0:r.error)||x.message))}finally{z.value=null,L.value=0}},Ne=n=>{if(n===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,x)).toFixed(2))+" "+r[x]},fe=async()=>{var n,t;if(g.value.trim()){b.value=!0;try{await R.post(route("files.create-folder",{bucket:s.activeBucket.id}),{folder_name:g.value.trim(),prefix:s.currentPath}),w.value=!1,g.value="",S.reload({only:["files","folders"]})}catch(r){console.error("Failed to create folder:",r),alert("Failed to create folder: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{b.value=!1}}},me=n=>{U.value=n,V.value=n.name,F.value=!0},he=async()=>{var n,t;if(!V.value.trim()||V.value===U.value.name){F.value=!1;return}T.value=!0;try{await R.post(route("files.rename",{bucket:s.activeBucket.id}),{old_path:U.value.path,new_name:V.value.trim(),is_folder:U.value.type==="folder"}),F.value=!1,U.value=null,V.value="",S.reload({only:["files","folders"]})}catch(r){console.error("Failed to rename:",r),alert("Failed to rename: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{T.value=!1}},Re=()=>{v.value.size!==0&&(q.value=Array.from(v.value),H.value="",W.value=!0,qe())},qe=async()=>{var n,t;oe.value=!0;try{const r=await R.get(route("files.folder-tree",{bucket:s.activeBucket.id}));ue.value=r.data.folders}catch(r){console.error("Failed to load folder tree:",r),alert("Failed to load folders: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{oe.value=!1}},Oe=async()=>{var n,t;if(!(O.value||q.value.length===0)){O.value=!0;try{await R.post(route("files.move",{bucket:s.activeBucket.id}),{items:q.value,destination:H.value,current_path:s.currentPath}),W.value=!1,q.value=[],H.value="",v.value.clear(),S.reload({only:["files","folders"]})}catch(r){console.error("Failed to move items:",r),alert("Failed to move items: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{O.value=!1}}},ge=n=>{v.value.has(n.path)?v.value.delete(n.path):v.value.add(n.path),v.value=new Set(v.value)},Ke=()=>{const n=s.files.length+s.folders.length;if(v.value.size===n)v.value.clear();else{const t=[...s.files.map(r=>r.path),...s.folders.map(r=>r.path)];v.value=new Set(t)}},Ge=async()=>{if(v.value.size!==0&&confirm(`Are you sure you want to delete ${v.value.size} item(s)?`)){M.value=!0;for(const n of v.value)await S.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n}),{preserveState:!1,preserveScroll:!0});v.value.clear(),M.value=!1,S.reload()}},E=n=>{const t=n.split(".").pop().toLowerCase();return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",avi:"video",mkv:"video",mov:"video",wmv:"video",webm:"video",pdf:"pdf",doc:"word",docx:"word",xls:"excel",xlsx:"excel",csv:"excel",ppt:"powerpoint",pptx:"powerpoint",txt:"text",log:"text",md:"text",zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",js:"code",ts:"code",jsx:"code",tsx:"code",py:"code",java:"code",cpp:"code",c:"code",h:"code",hpp:"code",html:"code",css:"code",scss:"code",sass:"code",less:"code",json:"code",xml:"code",yaml:"code",yml:"code",php:"code",rb:"code",go:"code",rs:"code",swift:"code",sql:"code",sh:"code",bash:"code",ps1:"code",bat:"code",vue:"code",jsx:"code",tsx:"code",env:"code",gitignore:"code",dockerfile:"code"}[t]||"file"},X=n=>{const t=n.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","svg","webp","bmp","mp4","webm","mov","avi","mkv","mp3","wav","ogg","m4a","flac","pdf","txt","log","md","js","ts","jsx","tsx","css","scss","sass","html","xml","json","php","py","java","c","cpp","h","sql","sh","yml","yaml"].includes(t)},Ye=n=>{n.preventDefault(),n.stopPropagation(),I.value++,m.value=!0},Ze=n=>{n.preventDefault(),n.stopPropagation(),I.value--,I.value===0&&(m.value=!1)},Je=n=>{n.preventDefault(),n.stopPropagation()},Qe=async n=>{n.preventDefault(),n.stopPropagation(),m.value=!1,I.value=0;const t=Array.from(n.dataTransfer.items),r=[];for(const x of t)if(x.kind==="file"){const C=x.webkitGetAsEntry?x.webkitGetAsEntry():x.getAsEntry();if(C)await xe(C,r);else{const a=x.getAsFile();a&&r.push({file:a,path:a.name})}}r.length>0&&await We(r)},xe=async(n,t,r="")=>{if(n.isFile){const x=await new Promise(C=>n.file(C));t.push({file:x,path:r+x.name})}else if(n.isDirectory){const x=n.createReader(),C=await new Promise(a=>{x.readEntries(a)});for(const a of C)await xe(a,t,r+n.name+"/")}},We=async n=>{p.value=n.length,f.value=0,d.value=0,i.value=!0;let t=0,r=[];for(const{file:x,path:C}of n)try{await ve(x,C),t++,f.value++,d.value=Math.round(f.value/p.value*100)}catch{r.push(C),f.value++,d.value=Math.round(f.value/p.value*100)}i.value=!1,d.value=0,v.value.clear(),t>0?S.reload({only:["files","folders"],onSuccess:()=>{r.length>0&&alert(`${t} file(s) uploaded successfully. Failed to upload: ${r.join(", ")}`)}}):r.length>0&&alert(`Failed to upload: ${r.join(", ")}`)};return(n,t)=>(u(),c(Y,null,[A(ie(at),{title:"Files"}),A(rt,null,{header:j(()=>[e("div",Jt,[e("div",null,[t[16]||(t[16]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Files ",-1)),e("p",Qt," Browsing: "+k(o.activeBucket.name)+" ("+k(o.activeBucket.provider)+") ",1)]),e("div",Wt,[A(te,{onClick:t[0]||(t[0]=r=>w.value=!0)},{default:j(()=>t[17]||(t[17]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),$(" New Folder ",-1)])),_:1,__:[17]}),A(le,{onClick:ce,disabled:i.value},{default:j(()=>[i.value?D("",!0):(u(),c("svg",Xt,t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)]))),i.value?(u(),c("span",eo,"Uploading... "+k(d.value)+"%",1)):(u(),c("span",to,"Upload"))]),_:1},8,["disabled"]),v.value.size>0?(u(),Z(te,{key:0,onClick:Re,disabled:O.value,class:"mr-2"},{default:j(()=>[t[19]||(t[19]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1)),$(" Move ("+k(v.value.size)+") ",1)]),_:1,__:[19]},8,["disabled"])):D("",!0),v.value.size>0?(u(),Z(dt,{key:1,onClick:Ge,disabled:M.value},{default:j(()=>[t[20]||(t[20]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),$(" Delete Selected ("+k(v.value.size)+") ",1)]),_:1,__:[20]},8,["disabled"])):D("",!0)])])]),default:j(()=>{var r,x,C;return[e("div",{class:"py-12 min-h-screen",onDragenter:N(Ye,["prevent"]),onDragleave:N(Ze,["prevent"]),onDragover:N(Je,["prevent"]),onDrop:N(Qe,["prevent"])},[m.value?(u(),c("div",oo,t[21]||(t[21]=[e("div",{class:"text-center"},[e("svg",{class:"mx-auto h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mt-2 text-lg font-medium text-indigo-900"},"Drop files or folders here"),e("p",{class:"text-sm text-indigo-700"},"Files will be uploaded to the current folder")],-1)]))):D("",!0),e("div",so,[e("div",lo,[e("div",no,[e("nav",ao,[A(ie(be),{href:n.route("files.index",{bucket:o.activeBucket.id}),class:"text-gray-600 hover:text-gray-900"},{default:j(()=>[$(k(o.activeBucket.name),1)]),_:1},8,["href"]),(u(!0),c(Y,null,se(o.breadcrumb,(a,h)=>(u(),c(Y,{key:h},[t[22]||(t[22]=e("span",{class:"text-gray-400"},"/",-1)),A(ie(be),{href:n.route("files.index",{bucket:o.activeBucket.id,prefix:a.path}),class:"text-gray-600 hover:text-gray-900"},{default:j(()=>[$(k(a.name),1)]),_:2},1032,["href"])],64))),128))])]),e("div",io,[o.files.length===0&&o.folders.length===0?(u(),c("div",ro,[t[24]||(t[24]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),t[25]||(t[25]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No files",-1)),t[26]||(t[26]=e("p",{class:"mt-1 text-sm text-gray-500"},"This folder is empty.",-1)),e("div",{class:"mt-6"},[t[23]||(t[23]=e("p",{class:"text-sm text-gray-500"}," Drag and drop files or folders here, or ",-1)),e("button",{onClick:ce,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500"}," browse to upload ")])])):(u(),c("div",uo,[e("table",co,[e("thead",vo,[e("tr",null,[e("th",po,[e("input",{type:"checkbox",onChange:Ke,checked:o.files.length+o.folders.length>0&&v.value.size===o.files.length+o.folders.length,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,fo)]),t[27]||(t[27]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name ",-1)),t[28]||(t[28]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Size ",-1)),t[29]||(t[29]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Modified ",-1)),t[30]||(t[30]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",mo,[o.currentPath?(u(),c("tr",{key:0,class:"hover:bg-gray-50 cursor-pointer",onClick:Ie},t[31]||(t[31]=[e("td",{class:"px-6 py-4"},null,-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),$(" .. ")])],-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},null,-1)]))):D("",!0),(u(!0),c(Y,null,se(o.folders,a=>(u(),c("tr",{key:a.path,class:"hover:bg-gray-50"},[e("td",ho,[e("input",{type:"checkbox",checked:v.value.has(a.path),onChange:h=>ge(a),onClick:t[1]||(t[1]=N(()=>{},["stop"])),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,go)]),e("td",xo,[e("div",wo,[e("button",{onClick:h=>Ae(a.path),class:"flex items-center hover:text-indigo-600"},[t[32]||(t[32]=e("svg",{class:"h-5 w-5 text-blue-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",ko,k(a.name),1)],8,yo),e("button",{onClick:N(h=>me(a),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},[(u(),c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":F.value&&U.value===a?2.5:2,onMouseover:t[2]||(t[2]=h=>h.currentTarget.querySelector("path").setAttribute("stroke-width","2.5")),onMouseleave:t[3]||(t[3]=h=>h.currentTarget.querySelector("path").setAttribute("stroke-width","2"))},t[33]||(t[33]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)]),40,Co))],8,bo)])]),t[39]||(t[39]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),t[40]||(t[40]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),e("td",Bo,[e("div",Mo,[t[38]||(t[38]=e("div",{class:"relative group"},[e("button",{disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Preview not available ")],-1)),e("div",_o,[e("button",{onClick:h=>Ee(a),disabled:z.value===a.path,class:ee(["p-1.5 transition-colors rounded-md",z.value===a.path?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"])},[z.value!==a.path?(u(),c("svg",zo,t[34]||(t[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))):(u(),c("svg",Fo,t[35]||(t[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])))],10,jo),e("span",Uo,k(z.value===a.path?`Downloading... ${L.value}%`:"Download as ZIP"),1)]),e("div",$o,[e("button",{onClick:h=>Te(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[36]||(t[36]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Vo),t[37]||(t[37]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete Folder ",-1))])])])]))),128)),(u(!0),c(Y,null,se(o.files,a=>(u(),c("tr",{key:a.path,class:"hover:bg-gray-50"},[e("td",Ao,[e("input",{type:"checkbox",checked:v.value.has(a.path),onChange:h=>ge(a),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Io)]),e("td",Do,[e("div",So,[e("button",{onClick:h=>X(a.name)?pe(a):null,class:ee(["flex items-center",X(a.name)?"hover:text-indigo-600 cursor-pointer":"cursor-default"])},[E(a.name)==="image"?(u(),c("svg",Ho,t[41]||(t[41]=[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="video"?(u(),c("svg",Po,t[42]||(t[42]=[e("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},null,-1)]))):E(a.name)==="pdf"?(u(),c("svg",To,t[43]||(t[43]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17h6M9 13h6M9 9h4"},null,-1)]))):E(a.name)==="excel"?(u(),c("svg",Eo,t[44]||(t[44]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="word"?(u(),c("svg",No,t[45]||(t[45]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 4a1 1 0 011 1v1h2V7a1 1 0 112 0v6a1 1 0 11-2 0v-2H9v2a1 1 0 11-2 0V7a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="archive"?(u(),c("svg",Ro,t[46]||(t[46]=[e("path",{d:"M2 6a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M2 12a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm6 1a1 1 0 100 2h4a1 1 0 100-2H8z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="code"?(u(),c("svg",qo,t[47]||(t[47]=[e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="text"?(u(),c("svg",Oo,t[48]||(t[48]=[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0h8v12H6V4z","clip-rule":"evenodd"},null,-1),e("path",{d:"M8 7h4v2H8V7zm0 4h4v2H8v-2z"},null,-1)]))):(u(),c("svg",Ko,t[49]||(t[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e("span",{class:ee(X(a.name)?"hover:underline":"")},k(a.name),3)],10,Lo),e("button",{onClick:N(h=>me(a),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},[(u(),c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":F.value&&U.value===a?2.5:2,onMouseover:t[4]||(t[4]=h=>h.currentTarget.querySelector("path").setAttribute("stroke-width","2.5")),onMouseleave:t[5]||(t[5]=h=>h.currentTarget.querySelector("path").setAttribute("stroke-width","2"))},t[50]||(t[50]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)]),40,Yo))],8,Go)])]),e("td",Zo,k(Ne(a.size)),1),e("td",Jo,k(a.last_modified),1),e("td",Qo,[e("div",Wo,[e("div",Xo,[X(a.name)?(u(),c("button",{key:0,onClick:h=>pe(a),class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-colors"},t[51]||(t[51]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,es)):(u(),c("button",ts,t[52]||(t[52]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]))),e("span",os,k(X(a.name)?"Preview":"Preview not available"),1)]),e("div",ss,[e("button",{onClick:h=>Se(a),class:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors"},t[53]||(t[53]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)]),8,ls),t[54]||(t[54]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Download ",-1))]),e("div",ns,[e("button",{onClick:h=>Pe(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[55]||(t[55]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,as),t[56]||(t[56]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete ",-1))])])])]))),128))])])]))])])])],32),e("input",{ref_key:"fileInput",ref:l,type:"file",multiple:"",onChange:De,class:"hidden"},null,544),A(St,{modelValue:B.value,"onUpdate:modelValue":t[6]||(t[6]=a=>B.value=a),file:_.value,"bucket-id":o.activeBucket.id,onNavigatePrev:Le,onNavigateNext:He},null,8,["modelValue","file","bucket-id"]),(u(),Z(re,{to:"body"},[w.value?(u(),c("div",is,[e("div",rs,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[7]||(t[7]=a=>w.value=!1)},t[57]||(t[57]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[61]||(t[61]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ds,[e("div",us,[e("div",cs,[t[59]||(t[59]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1)),e("div",vs,[t[58]||(t[58]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Create New Folder ",-1)),e("div",ps,[Ce(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>g.value=a),onKeyup:Be(fe,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Folder name",disabled:b.value},null,40,fs),[[Me,g.value]])])])])]),e("div",ms,[A(le,{onClick:fe,disabled:!g.value.trim()||b.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[$(k(b.value?"Creating...":"Create"),1)]),_:1},8,["disabled"]),A(te,{onClick:t[9]||(t[9]=a=>{w.value=!1,g.value=""}),disabled:b.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[60]||(t[60]=[$(" Cancel ",-1)])),_:1,__:[60]},8,["disabled"])])])])])):D("",!0)])),(u(),Z(re,{to:"body"},[F.value?(u(),c("div",hs,[e("div",gs,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[10]||(t[10]=a=>F.value=!1)},t[62]||(t[62]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[65]||(t[65]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",xs,[e("div",ws,[e("div",ys,[t[63]||(t[63]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",ks,[e("h3",bs," Rename "+k(((r=U.value)==null?void 0:r.type)==="folder"?"Folder":"File"),1),e("div",Cs,[Ce(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>V.value=a),onKeyup:Be(he,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:(x=U.value)==null?void 0:x.name,disabled:T.value},null,40,Bs),[[Me,V.value]])])])])]),e("div",Ms,[A(le,{onClick:he,disabled:!V.value.trim()||V.value===((C=U.value)==null?void 0:C.name)||T.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[$(k(T.value?"Renaming...":"Rename"),1)]),_:1},8,["disabled"]),A(te,{onClick:t[12]||(t[12]=a=>{F.value=!1,U.value=null,V.value=""}),disabled:T.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[64]||(t[64]=[$(" Cancel ",-1)])),_:1,__:[64]},8,["disabled"])])])])])):D("",!0)])),(u(),Z(re,{to:"body"},[W.value?(u(),c("div",_s,[e("div",js,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[13]||(t[13]=a=>W.value=!1)},t[66]||(t[66]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[74]||(t[74]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",zs,[e("div",Fs,[e("div",Us,[t[72]||(t[72]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])],-1)),e("div",$s,[e("h3",Vs," Move "+k(q.value.length)+" Item"+k(q.value.length>1?"s":""),1),e("div",As,[t[71]||(t[71]=e("p",{class:"text-sm text-gray-500 mb-3"},"Select destination folder:",-1)),oe.value?(u(),c("div",Is,t[67]||(t[67]=[e("svg",{class:"animate-spin h-8 w-8 text-gray-400 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(u(),c("div",Ds,[e("div",{onClick:t[14]||(t[14]=a=>H.value=""),class:ee(["px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center",{"bg-blue-50":H.value===""}])},[t[68]||(t[68]=e("svg",{class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1)),e("span",Ss,k(o.activeBucket.name)+" (root)",1)],2),(u(!0),c(Y,null,se(ue.value,a=>(u(),c("div",{key:a.path},[e("div",{onClick:h=>H.value=a.path,class:ee(["px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center",{"bg-blue-50":H.value===a.path}]),style:it({paddingLeft:a.level*20+12+"px"})},[t[69]||(t[69]=e("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",Hs,k(a.name),1)],14,Ls)]))),128))])),H.value?(u(),c("p",Ps,[t[70]||(t[70]=$(" Moving to: ",-1)),e("span",Ts,k(H.value||"Root"),1)])):D("",!0)])])])]),e("div",Es,[A(le,{onClick:Oe,disabled:O.value||oe.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[$(k(O.value?"Moving...":"Move"),1)]),_:1},8,["disabled"]),A(te,{onClick:t[15]||(t[15]=a=>{W.value=!1,q.value=[],H.value=""}),disabled:O.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[73]||(t[73]=[$(" Cancel ",-1)])),_:1,__:[73]},8,["disabled"])])])])])):D("",!0)]))]}),_:1})],64))}};export{Ys as default};
