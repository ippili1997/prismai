import{m as ot,p as w,j as ye,x as ke,y as st,z as lt,c as Z,o as u,w as j,g as c,i as D,b as e,t as k,f as F,e as N,T as nt,A as R,a as $,d as ie,h as at,l as be,F as Y,q as se,n as ee,B as re,k as Ce,s as Be,C as _e,D as it,E as L}from"./app-DGtmmAZw.js";import{_ as rt}from"./AuthenticatedLayout-BI8PJzsq.js";import{P as le}from"./PrimaryButton-DHY4HcjD.js";import{_ as te}from"./SecondaryButton-BGSmlLeb.js";import{D as dt}from"./DangerButton-D0pFeCgY.js";import{_ as ut}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B7JKHdeO.js";const ct={key:0,class:"fixed inset-0 z-50 overflow-hidden"},vt={class:"relative flex items-center"},pt={class:"bg-white rounded-lg shadow-xl max-w-6xl max-h-[90vh] w-full min-w-[800px] overflow-hidden"},ft={class:"flex items-center justify-between p-4 border-b"},mt={class:"text-lg font-semibold text-gray-900"},ht={class:"text-sm text-gray-500"},gt={class:"flex items-center gap-2"},xt=["href"],wt={class:"relative overflow-auto bg-gray-50 min-h-[600px] h-[calc(90vh-8rem)]"},yt={key:0,class:"flex items-center justify-center h-full"},kt={key:1,class:"flex items-center justify-center h-full"},bt={class:"text-center"},Ct={class:"mt-2 text-sm text-gray-600"},Bt={key:2,class:"flex items-center justify-center h-full"},_t={key:3,class:"h-full min-h-[600px]"},Mt={key:0,class:"h-full min-h-[600px] flex items-center justify-center p-4"},jt=["src","alt"],zt=["src"],Ft={key:2,class:"h-full flex items-center justify-center bg-black"},Ut=["src"],$t={key:3,class:"h-full flex items-center justify-center"},Vt=["src"],At={key:4,class:"h-full overflow-auto"},It={class:"bg-white p-4 text-sm font-mono whitespace-pre-wrap break-words"},Dt=ot({__name:"FileViewer",props:{file:{},bucketId:{},modelValue:{type:Boolean}},emits:["update:modelValue","navigate-prev","navigate-next"],setup(o,{emit:s}){const l=o,i=s,d=w(!0),p=w(""),f=w(""),v=w(""),_=w(!1),B=ye(()=>{var b;if(!l.file)return"unknown";const x=((b=l.file.name.split(".").pop())==null?void 0:b.toLowerCase())||"";return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",webm:"video",mov:"video",avi:"video",mkv:"video",mp3:"audio",wav:"audio",ogg:"audio",m4a:"audio",flac:"audio",pdf:"pdf",txt:"text",log:"text",md:"text",js:"code",ts:"code",jsx:"code",tsx:"code",css:"code",scss:"code",sass:"code",html:"code",xml:"code",json:"code",php:"code",py:"code",java:"code",c:"code",cpp:"code",h:"code",sql:"code",sh:"code",yml:"code",yaml:"code"}[x]||"unknown"}),M=ye(()=>["image","video","audio","pdf","text","code"].includes(B.value)),m=async()=>{var x,h;if(!(!l.file||!l.modelValue)){if(d.value=!0,p.value="",f.value="",v.value="",_.value=!1,!M.value){d.value=!1;return}try{const b=await R.post(route("files.view-url",{bucket:l.bucketId}),{key:l.file.path});b.data.is_text&&b.data.content?(v.value=b.data.content,_.value=!0):(f.value=b.data.view_url,_.value=!1)}catch(b){console.error("Failed to load view URL:",b),p.value=((h=(x=b.response)==null?void 0:x.data)==null?void 0:h.error)||"Failed to load file preview"}finally{d.value=!1}}};ke(()=>l.modelValue,x=>{x&&l.file&&m()}),ke(()=>l.file,x=>{x&&l.modelValue&&m()});const V=()=>{i("update:modelValue",!1),f.value="",v.value="",p.value="",_.value=!1},z=x=>{l.modelValue&&(x.key==="Escape"?V():x.key==="ArrowLeft"?i("navigate-prev"):x.key==="ArrowRight"&&i("navigate-next"))};st(()=>{window.addEventListener("keydown",z)}),lt(()=>{window.removeEventListener("keydown",z)});const S=x=>{if(x===0)return"0 Bytes";const h=1024,b=["Bytes","KB","MB","GB"],A=Math.floor(Math.log(x)/Math.log(h));return parseFloat((x/Math.pow(h,A)).toFixed(2))+" "+b[A]};return(x,h)=>(u(),Z(nt,{name:"modal"},{default:j(()=>{var b,A,I,U;return[x.modelValue?(u(),c("div",ct,[e("div",{class:"absolute inset-0 bg-black bg-opacity-75 cursor-pointer",onClick:V}),e("div",{class:"relative h-full flex items-center justify-center p-4",onClick:N(V,["self"])},[e("div",vt,[e("button",{onClick:h[0]||(h[0]=T=>x.$emit("navigate-prev")),class:"absolute -left-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Previous file (←)"},h[2]||(h[2]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),e("button",{onClick:h[1]||(h[1]=T=>x.$emit("navigate-next")),class:"absolute -right-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Next file (→)"},h[3]||(h[3]=[e("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),e("div",pt,[e("div",ft,[e("div",null,[e("h3",mt,k((b=x.file)==null?void 0:b.name),1),e("p",ht,k(S(((A=x.file)==null?void 0:A.size)||0)),1)]),e("div",gt,[e("a",{href:x.route("files.download",{bucket:x.bucketId,key:(I=x.file)==null?void 0:I.path}),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},h[4]||(h[4]=[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),F(" Download ",-1)]),8,xt),e("button",{onClick:V,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},h[5]||(h[5]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",wt,[d.value?(u(),c("div",yt,h[6]||(h[6]=[e("div",{class:"text-center"},[e("svg",{class:"animate-spin h-10 w-10 text-gray-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading preview...")],-1)]))):p.value?(u(),c("div",kt,[e("div",bt,[h[7]||(h[7]=e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("p",Ct,k(p.value),1)])])):M.value?f.value||v.value?(u(),c("div",_t,[B.value==="image"?(u(),c("div",Mt,[e("img",{src:f.value,alt:(U=x.file)==null?void 0:U.name,class:"max-w-full max-h-full object-contain"},null,8,jt)])):B.value==="pdf"?(u(),c("iframe",{key:1,src:f.value,class:"w-full h-full min-h-[600px]",frameborder:"0"},null,8,zt)):B.value==="video"?(u(),c("div",Ft,[e("video",{src:f.value,controls:"",class:"max-w-full max-h-full"}," Your browser does not support the video tag. ",8,Ut)])):B.value==="audio"?(u(),c("div",$t,[e("audio",{src:f.value,controls:"",class:"w-full max-w-md"}," Your browser does not support the audio tag. ",8,Vt)])):(B.value==="text"||B.value==="code")&&_.value?(u(),c("div",At,[e("pre",It,[e("code",null,k(v.value),1)])])):D("",!0)])):D("",!0):(u(),c("div",Bt,h[8]||(h[8]=[e("div",{class:"text-center"},[e("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"mt-2 text-sm text-gray-600"},"This file type cannot be previewed"),e("p",{class:"mt-1 text-xs text-gray-500"},"Please download the file to view it")],-1)])))])])])])])):D("",!0)]}),_:1}))}}),Lt=ut(Dt,[["__scopeId","data-v-62055ee5"]]);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(o,s,l){const i=Number(0xffffffffn&s),d=Number(s>>32n);this.setUint32(o+(l?0:4),i,l),this.setUint32(o+(l?4:0),d,l)}});var Q=o=>new DataView(new ArrayBuffer(o)),P=o=>new Uint8Array(o.buffer||o),J=o=>new TextEncoder().encode(String(o)),q=o=>Math.min(4294967295,Number(o)),Me=o=>Math.min(65535,Number(o));function St(o,s,l){s===void 0||s instanceof Date||(s=new Date(s));const i=o!==void 0;if(l||(l=i?436:509),o instanceof File)return{isFile:i,t:s||new Date(o.lastModified),bytes:o.stream(),mode:l};if(o instanceof Response)return{isFile:i,t:s||new Date(o.headers.get("Last-Modified")||Date.now()),bytes:o.body,mode:l};if(s===void 0)s=new Date;else if(isNaN(s))throw new Error("Invalid modification date.");if(!i)return{isFile:i,t:s,mode:l};if(typeof o=="string")return{isFile:i,t:s,bytes:J(o),mode:l};if(o instanceof Blob)return{isFile:i,t:s,bytes:o.stream(),mode:l};if(o instanceof Uint8Array||o instanceof ReadableStream)return{isFile:i,t:s,bytes:o,mode:l};if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))return{isFile:i,t:s,bytes:P(o),mode:l};if(Symbol.asyncIterator in o)return{isFile:i,t:s,bytes:ze(o[Symbol.asyncIterator]()),mode:l};throw new TypeError("Unsupported input format.")}function ze(o,s=o){return new ReadableStream({async pull(l){let i=0;for(;l.desiredSize>i;){const d=await o.next();if(!d.value){l.close();break}{const p=Ht(d.value);l.enqueue(p),i+=p.byteLength}}},cancel(l){var i;(i=s.throw)==null||i.call(s,l)}})}function Ht(o){return typeof o=="string"?J(o):o instanceof Uint8Array?o:P(o)}function Fe(o,s,l){let[i,d]=function(p){return p?p instanceof Uint8Array?[p,1]:ArrayBuffer.isView(p)||p instanceof ArrayBuffer?[P(p),1]:[J(p),0]:[void 0,0]}(s);if(o instanceof File)return{i:de(i||J(o.name)),o:BigInt(o.size),u:d};if(o instanceof Response){const p=o.headers.get("content-disposition"),f=p&&p.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),v=f&&f[1]||o.url&&new URL(o.url).pathname.split("/").findLast(Boolean),_=v&&decodeURIComponent(v),B=l||+o.headers.get("content-length");return{i:de(i||J(_)),o:BigInt(B),u:d}}return i=de(i,o!==void 0||l!==void 0),typeof o=="string"?{i,o:BigInt(J(o).length),u:d}:o instanceof Blob?{i,o:BigInt(o.size),u:d}:o instanceof ArrayBuffer||ArrayBuffer.isView(o)?{i,o:BigInt(o.byteLength),u:d}:{i,o:Pt(o,l),u:d}}function Pt(o,s){return s>-1?BigInt(s):o?void 0:0n}function de(o,s=1){if(!o||o.every(l=>l===47))throw new Error("The file must have a name.");if(s)for(;o[o.length-1]===47;)o=o.subarray(0,-1);else o[o.length-1]!==47&&(o=new Uint8Array([...o,47]));return o}var Ue=new Uint32Array(256);for(let o=0;o<256;++o){let s=o;for(let l=0;l<8;++l)s=s>>>1^(1&s&&3988292384);Ue[o]=s}function je(o,s=0){s=~s;for(var l=0,i=o.length;l<i;l++)s=s>>>8^Ue[255&s^o[l]];return~s>>>0}function $e(o,s,l=0){const i=o.getSeconds()>>1|o.getMinutes()<<5|o.getHours()<<11,d=o.getDate()|o.getMonth()+1<<5|o.getFullYear()-1980<<9;s.setUint16(l,i,1),s.setUint16(l+2,d,1)}function Tt({i:o,u:s},l){return 8*(!s||(l??function(i){try{Et.decode(i)}catch{return 0}return 1}(o)))}var Et=new TextDecoder("utf8",{fatal:1});function Nt(o,s=0){const l=Q(30);return l.setUint32(0,1347093252),l.setUint32(4,754976768|s),$e(o.t,l,10),l.setUint16(26,o.i.length,1),P(l)}async function*Rt(o){let{bytes:s}=o;if("then"in s&&(s=await s),s instanceof Uint8Array)yield s,o.l=je(s,0),o.o=BigInt(s.length);else{o.o=0n;const l=s.getReader();for(;;){const{value:i,done:d}=await l.read();if(d)break;o.l=je(i,o.l),o.o+=BigInt(i.length),yield i}}}function Ot(o,s){const l=Q(16+(s?8:0));return l.setUint32(0,1347094280),l.setUint32(4,o.isFile?o.l:0,1),s?(l.setBigUint64(8,o.o,1),l.setBigUint64(16,o.o,1)):(l.setUint32(8,q(o.o),1),l.setUint32(12,q(o.o),1)),P(l)}function Kt(o,s,l=0,i=0){const d=Q(46);return d.setUint32(0,1347092738),d.setUint32(4,755182848),d.setUint16(8,2048|l),$e(o.t,d,12),d.setUint32(16,o.isFile?o.l:0,1),d.setUint32(20,q(o.o),1),d.setUint32(24,q(o.o),1),d.setUint16(28,o.i.length,1),d.setUint16(30,i,1),d.setUint16(40,o.mode|(o.isFile?32768:16384),1),d.setUint32(42,q(s),1),P(d)}function qt(o,s,l){const i=Q(l);return i.setUint16(0,1,1),i.setUint16(2,l-4,1),16&l&&(i.setBigUint64(4,o.o,1),i.setBigUint64(12,o.o,1)),i.setBigUint64(l-8,s,1),P(i)}function Ve(o){return o instanceof File||o instanceof Response?[[o],[o]]:[[o.input,o.name,o.size],[o.input,o.lastModified,o.mode]]}var Gt=o=>function(s){let l=BigInt(22),i=0n,d=0;for(const p of s){if(!p.i)throw new Error("Every file must have a non-empty name.");if(p.o===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(p.i)}".`);const f=p.o>=0xffffffffn,v=i>=0xffffffffn;i+=BigInt(46+p.i.length+(f&&8))+p.o,l+=BigInt(p.i.length+46+(12*v|28*f)),d||(d=f)}return(d||i>=0xffffffffn)&&(l+=BigInt(76)),l+i}(function*(s){for(const l of s)yield Fe(...Ve(l)[0])}(o));function Yt(o,s={}){const l={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof s.length=="bigint"||Number.isInteger(s.length))&&s.length>0&&(l["Content-Length"]=String(s.length)),s.metadata&&(l["Content-Length"]=String(Gt(s.metadata))),new Response(Zt(o,s),{headers:l})}function Zt(o,s={}){const l=function(i){var p;const d=i[Symbol.iterator in i?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const f=await d.next();if(f.done)return f;const[v,_]=Ve(f.value);return{done:0,value:Object.assign(St(..._),Fe(...v))}},throw:(p=d.throw)==null?void 0:p.bind(d),[Symbol.asyncIterator](){return this}}}(o);return ze(async function*(i,d){const p=[];let f=0n,v=0n,_=0;for await(const m of i){const V=Tt(m,d.buffersAreUTF8);yield Nt(m,V),yield new Uint8Array(m.i),m.isFile&&(yield*Rt(m));const z=m.o>=0xffffffffn,S=12*(f>=0xffffffffn)|28*z;yield Ot(m,z),p.push(Kt(m,f,V,S)),p.push(m.i),S&&p.push(qt(m,f,S)),z&&(f+=8n),v++,f+=BigInt(46+m.i.length)+m.o,_||(_=z)}let B=0n;for(const m of p)yield m,B+=BigInt(m.length);if(_||f>=0xffffffffn){const m=Q(76);m.setUint32(0,1347094022),m.setBigUint64(4,BigInt(44),1),m.setUint32(12,755182848),m.setBigUint64(24,v,1),m.setBigUint64(32,v,1),m.setBigUint64(40,B,1),m.setBigUint64(48,f,1),m.setUint32(56,1347094023),m.setBigUint64(64,f+B,1),m.setUint32(72,1,1),yield P(m)}const M=Q(22);M.setUint32(0,1347093766),M.setUint16(8,Me(v),1),M.setUint16(10,Me(v),1),M.setUint32(12,q(B),1),M.setUint32(16,q(f),1),yield P(M)}(l,s),l)}const Jt={class:"flex items-center justify-between"},Qt={class:"text-sm text-gray-600 mt-1"},Wt={class:"flex items-center space-x-2"},Xt={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},eo={key:1},to={key:2},oo={key:0,class:"fixed inset-0 z-50 bg-indigo-50 bg-opacity-90 flex items-center justify-center pointer-events-none"},so={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},lo={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative"},no={class:"p-4 border-b border-gray-200"},ao={class:"flex items-center space-x-2 text-sm"},io={class:"p-6"},ro={key:0,class:"text-center py-12"},uo={key:1,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},co={class:"min-w-full divide-y divide-gray-300"},vo={class:"bg-gray-50"},po={scope:"col",class:"w-12 px-6 py-3"},fo=["checked"],mo={class:"bg-white divide-y divide-gray-200"},ho={class:"px-6 py-4"},go=["checked","onChange"],xo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},wo={class:"flex items-center group"},yo=["onClick"],ko={class:"hover:underline"},bo=["onClick"],Co={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Bo={class:"flex items-center space-x-2"},_o={class:"relative group"},Mo=["onClick","disabled"],jo={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zo={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fo={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},Uo={class:"relative group"},$o=["onClick"],Vo={class:"px-6 py-4"},Ao=["checked","onChange"],Io={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Do={class:"flex items-center group"},Lo=["onClick"],So={key:0,class:"h-5 w-5 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ho={key:1,class:"h-5 w-5 text-purple-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Po={key:2,class:"h-5 w-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={key:3,class:"h-5 w-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Eo={key:4,class:"h-5 w-5 text-blue-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},No={key:5,class:"h-5 w-5 text-yellow-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ro={key:6,class:"h-5 w-5 text-indigo-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Oo={key:7,class:"h-5 w-5 text-gray-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},Ko={key:8,class:"h-5 w-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qo=["onClick"],Go={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Yo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Jo={class:"flex items-center space-x-2"},Qo={class:"relative group"},Wo=["onClick"],Xo={key:1,disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},es={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},ts={class:"relative group"},os=["onClick"],ss={class:"relative group"},ls=["onClick"],ns={key:0,class:"fixed inset-0 overflow-y-auto z-50"},as={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},is={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},rs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ds={class:"sm:flex sm:items-start"},us={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},cs={class:"mt-4"},vs=["disabled"],ps={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},fs={key:0,class:"fixed inset-0 overflow-y-auto z-50"},ms={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},hs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},gs={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},xs={class:"sm:flex sm:items-start"},ws={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},ys={class:"text-lg leading-6 font-medium text-gray-900"},ks={class:"mt-4"},bs=["placeholder","disabled"],Cs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Bs={key:0,class:"fixed inset-0 overflow-y-auto z-50"},_s={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ms={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},js={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},zs={class:"sm:flex sm:items-start"},Fs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},Us={class:"text-lg leading-6 font-medium text-gray-900"},$s={class:"mt-4"},Vs={key:0,class:"text-center py-4"},As={key:1,class:"max-h-64 overflow-y-auto border border-gray-300 rounded-md"},Is={class:"text-sm"},Ds=["onClick"],Ls={class:"text-sm"},Ss={key:2,class:"mt-2 text-sm text-gray-600"},Hs={class:"font-medium"},Ps={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Gs={__name:"Index",props:{files:Array,folders:Array,activeBucket:Object,currentPath:String,breadcrumb:Array},setup(o){const s=o,l=w(null),i=w(!1),d=w(0),p=w(0),f=w(0),v=w(new Set),_=w(!1),B=w(!1),M=w(null),m=w(!1),V=w(0),z=w(null),S=w(0),x=w(!1),h=w(""),b=w(!1),A=w(!1),I=w(null),U=w(""),T=w(!1),W=w(!1),O=w([]),H=w(""),K=w(!1),ue=w([]),oe=w(!1),Ae=n=>{L.get(route("files.index",{bucket:s.activeBucket.id,prefix:n}))},Ie=()=>{if(s.currentPath){const n=s.currentPath.split("/").filter(r=>r);n.pop();const t=n.length>0?n.join("/")+"/":"";L.get(route("files.index",{bucket:s.activeBucket.id,prefix:t}))}},ce=()=>{l.value.click()},De=async n=>{const t=Array.from(n.target.files);if(t.length===0)return;p.value=t.length,f.value=0,d.value=0,i.value=!0;let r=0,g=[];for(const C of t)try{await ve(C),r++,f.value++,d.value=Math.round(f.value/p.value*100)}catch{g.push(C.name),f.value++,d.value=Math.round(f.value/p.value*100)}n.target.value="",i.value=!1,d.value=0,v.value.clear(),r>0?L.reload({only:["files","folders"],onSuccess:()=>{g.length>0&&alert(`${r} file(s) uploaded successfully. Failed to upload: ${g.join(", ")}`)}}):g.length>0&&alert(`Failed to upload: ${g.join(", ")}`)},ve=async(n,t="")=>{var r,g,C,a;try{const y=t||n.name,Xe=y.split("/").pop(),we=y.substring(0,y.lastIndexOf("/")),ne=await R.post(route("files.upload-url",{bucket:s.activeBucket.id}),{filename:y,content_type:n.type||"application/octet-stream",prefix:s.currentPath}),{upload_url:G,key:ae}=ne.data;await R.put(G,n,{headers:{"Content-Type":n.type||"application/octet-stream"}})}catch(y){throw console.error("Upload failed:",y),console.error("Error details:",y.response),alert("Upload error: "+(((g=(r=y.response)==null?void 0:r.data)==null?void 0:g.error)||((a=(C=y.response)==null?void 0:C.data)==null?void 0:a.message)||y.message)),y}},Le=n=>{window.location.href=route("files.download",{bucket:s.activeBucket.id,key:n.path})},pe=n=>{M.value=n,B.value=!0},Se=()=>{const n=s.files.findIndex(t=>{var r;return t.path===((r=M.value)==null?void 0:r.path)});n>0&&(M.value=s.files[n-1])},He=()=>{const n=s.files.findIndex(t=>{var r;return t.path===((r=M.value)==null?void 0:r.path)});n<s.files.length-1&&(M.value=s.files[n+1])},Pe=n=>{confirm(`Are you sure you want to delete ${n.name}?`)&&L.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n.path}),{preserveState:!0,preserveScroll:!0})},Te=n=>{confirm(`Are you sure you want to delete the folder "${n.name}" and all its contents?`)&&L.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n.path}),{preserveState:!0,preserveScroll:!0})},Ee=async n=>{var t,r;try{z.value=n.path,S.value=0;const g=await R.post(route("files.folder-download-urls",{bucket:s.activeBucket.id}),{folder_path:n.path}),{files:C,folder_name:a,total_size:y,file_count:Xe}=g.data;if(C.length===0){alert("This folder is empty.");return}const we=await Promise.all(C.map(async(ae,et)=>{const tt=await fetch(ae.url);return S.value=Math.round((et+1)/C.length*100),{name:ae.path,input:tt}})),ne=await Yt(we).blob(),G=document.createElement("a");G.href=URL.createObjectURL(ne),G.download=`${a}.zip`,G.click(),URL.revokeObjectURL(G.href)}catch(g){console.error("Failed to download folder:",g),alert("Failed to download folder: "+(((r=(t=g.response)==null?void 0:t.data)==null?void 0:r.error)||g.message))}finally{z.value=null,S.value=0}},Ne=n=>{if(n===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(n)/Math.log(t));return parseFloat((n/Math.pow(t,g)).toFixed(2))+" "+r[g]},fe=async()=>{var n,t;if(h.value.trim()){b.value=!0;try{await R.post(route("files.create-folder",{bucket:s.activeBucket.id}),{folder_name:h.value.trim(),prefix:s.currentPath}),x.value=!1,h.value="",L.reload({only:["files","folders"]})}catch(r){console.error("Failed to create folder:",r),alert("Failed to create folder: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{b.value=!1}}},me=n=>{I.value=n,U.value=n.name,A.value=!0},he=async()=>{var n,t;if(!U.value.trim()||U.value===I.value.name){A.value=!1;return}T.value=!0;try{await R.post(route("files.rename",{bucket:s.activeBucket.id}),{old_path:I.value.path,new_name:U.value.trim(),is_folder:I.value.type==="folder"}),A.value=!1,I.value=null,U.value="",L.reload({only:["files","folders"]})}catch(r){console.error("Failed to rename:",r),alert("Failed to rename: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{T.value=!1}},Re=()=>{v.value.size!==0&&(O.value=Array.from(v.value),H.value="",W.value=!0,Oe())},Oe=async()=>{var n,t;oe.value=!0;try{const r=await R.get(route("files.folder-tree",{bucket:s.activeBucket.id}));ue.value=r.data.folders}catch(r){console.error("Failed to load folder tree:",r),alert("Failed to load folders: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{oe.value=!1}},Ke=async()=>{var n,t;if(!(K.value||O.value.length===0)){K.value=!0;try{await R.post(route("files.move",{bucket:s.activeBucket.id}),{items:O.value,destination:H.value,current_path:s.currentPath}),W.value=!1,O.value=[],H.value="",v.value.clear(),L.reload({only:["files","folders"]})}catch(r){console.error("Failed to move items:",r),alert("Failed to move items: "+(((t=(n=r.response)==null?void 0:n.data)==null?void 0:t.error)||r.message))}finally{K.value=!1}}},ge=n=>{v.value.has(n.path)?v.value.delete(n.path):v.value.add(n.path),v.value=new Set(v.value)},qe=()=>{const n=s.files.length+s.folders.length;if(v.value.size===n)v.value.clear();else{const t=[...s.files.map(r=>r.path),...s.folders.map(r=>r.path)];v.value=new Set(t)}},Ge=async()=>{if(v.value.size!==0&&confirm(`Are you sure you want to delete ${v.value.size} item(s)?`)){_.value=!0;for(const n of v.value)await L.delete(route("files.destroy",{bucket:s.activeBucket.id,key:n}),{preserveState:!1,preserveScroll:!0});v.value.clear(),_.value=!1,L.reload()}},E=n=>{const t=n.split(".").pop().toLowerCase();return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",avi:"video",mkv:"video",mov:"video",wmv:"video",webm:"video",pdf:"pdf",doc:"word",docx:"word",xls:"excel",xlsx:"excel",csv:"excel",ppt:"powerpoint",pptx:"powerpoint",txt:"text",log:"text",md:"text",zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",js:"code",ts:"code",jsx:"code",tsx:"code",py:"code",java:"code",cpp:"code",c:"code",h:"code",hpp:"code",html:"code",css:"code",scss:"code",sass:"code",less:"code",json:"code",xml:"code",yaml:"code",yml:"code",php:"code",rb:"code",go:"code",rs:"code",swift:"code",sql:"code",sh:"code",bash:"code",ps1:"code",bat:"code",vue:"code",jsx:"code",tsx:"code",env:"code",gitignore:"code",dockerfile:"code"}[t]||"file"},X=n=>{const t=n.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","svg","webp","bmp","mp4","webm","mov","avi","mkv","mp3","wav","ogg","m4a","flac","pdf","txt","log","md","js","ts","jsx","tsx","css","scss","sass","html","xml","json","php","py","java","c","cpp","h","sql","sh","yml","yaml"].includes(t)},Ye=n=>{n.preventDefault(),n.stopPropagation(),V.value++,m.value=!0},Ze=n=>{n.preventDefault(),n.stopPropagation(),V.value--,V.value===0&&(m.value=!1)},Je=n=>{n.preventDefault(),n.stopPropagation()},Qe=async n=>{n.preventDefault(),n.stopPropagation(),m.value=!1,V.value=0;const t=Array.from(n.dataTransfer.items),r=[];for(const g of t)if(g.kind==="file"){const C=g.webkitGetAsEntry?g.webkitGetAsEntry():g.getAsEntry();if(C)await xe(C,r);else{const a=g.getAsFile();a&&r.push({file:a,path:a.name})}}r.length>0&&await We(r)},xe=async(n,t,r="")=>{if(n.isFile){const g=await new Promise(C=>n.file(C));t.push({file:g,path:r+g.name})}else if(n.isDirectory){const g=n.createReader(),C=await new Promise(a=>{g.readEntries(a)});for(const a of C)await xe(a,t,r+n.name+"/")}},We=async n=>{p.value=n.length,f.value=0,d.value=0,i.value=!0;let t=0,r=[];for(const{file:g,path:C}of n)try{await ve(g,C),t++,f.value++,d.value=Math.round(f.value/p.value*100)}catch{r.push(C),f.value++,d.value=Math.round(f.value/p.value*100)}i.value=!1,d.value=0,v.value.clear(),t>0?L.reload({only:["files","folders"],onSuccess:()=>{r.length>0&&alert(`${t} file(s) uploaded successfully. Failed to upload: ${r.join(", ")}`)}}):r.length>0&&alert(`Failed to upload: ${r.join(", ")}`)};return(n,t)=>(u(),c(Y,null,[$(ie(at),{title:"Files"}),$(rt,null,{header:j(()=>[e("div",Jt,[e("div",null,[t[12]||(t[12]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Files ",-1)),e("p",Qt," Browsing: "+k(o.activeBucket.name)+" ("+k(o.activeBucket.provider)+") ",1)]),e("div",Wt,[$(te,{onClick:t[0]||(t[0]=r=>x.value=!0)},{default:j(()=>t[13]||(t[13]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),F(" New Folder ",-1)])),_:1,__:[13]}),$(le,{onClick:ce,disabled:i.value},{default:j(()=>[i.value?D("",!0):(u(),c("svg",Xt,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)]))),i.value?(u(),c("span",eo,"Uploading... "+k(d.value)+"%",1)):(u(),c("span",to,"Upload"))]),_:1},8,["disabled"]),v.value.size>0?(u(),Z(te,{key:0,onClick:Re,disabled:K.value,class:"mr-2"},{default:j(()=>[t[15]||(t[15]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1)),F(" Move ("+k(v.value.size)+") ",1)]),_:1,__:[15]},8,["disabled"])):D("",!0),v.value.size>0?(u(),Z(dt,{key:1,onClick:Ge,disabled:_.value},{default:j(()=>[t[16]||(t[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),F(" Delete Selected ("+k(v.value.size)+") ",1)]),_:1,__:[16]},8,["disabled"])):D("",!0)])])]),default:j(()=>{var r,g,C;return[e("div",{class:"py-12 min-h-screen",onDragenter:N(Ye,["prevent"]),onDragleave:N(Ze,["prevent"]),onDragover:N(Je,["prevent"]),onDrop:N(Qe,["prevent"])},[m.value?(u(),c("div",oo,t[17]||(t[17]=[e("div",{class:"text-center"},[e("svg",{class:"mx-auto h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mt-2 text-lg font-medium text-indigo-900"},"Drop files or folders here"),e("p",{class:"text-sm text-indigo-700"},"Files will be uploaded to the current folder")],-1)]))):D("",!0),e("div",so,[e("div",lo,[e("div",no,[e("nav",ao,[$(ie(be),{href:n.route("files.index",{bucket:o.activeBucket.id}),class:"text-gray-600 hover:text-gray-900"},{default:j(()=>[F(k(o.activeBucket.name),1)]),_:1},8,["href"]),(u(!0),c(Y,null,se(o.breadcrumb,(a,y)=>(u(),c(Y,{key:y},[t[18]||(t[18]=e("span",{class:"text-gray-400"},"/",-1)),$(ie(be),{href:n.route("files.index",{bucket:o.activeBucket.id,prefix:a.path}),class:"text-gray-600 hover:text-gray-900"},{default:j(()=>[F(k(a.name),1)]),_:2},1032,["href"])],64))),128))])]),e("div",io,[o.files.length===0&&o.folders.length===0?(u(),c("div",ro,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No files",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"This folder is empty.",-1)),e("div",{class:"mt-6"},[t[19]||(t[19]=e("p",{class:"text-sm text-gray-500"}," Drag and drop files or folders here, or ",-1)),e("button",{onClick:ce,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500"}," browse to upload ")])])):(u(),c("div",uo,[e("table",co,[e("thead",vo,[e("tr",null,[e("th",po,[e("input",{type:"checkbox",onChange:qe,checked:o.files.length+o.folders.length>0&&v.value.size===o.files.length+o.folders.length,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,fo)]),t[23]||(t[23]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name ",-1)),t[24]||(t[24]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Size ",-1)),t[25]||(t[25]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Modified ",-1)),t[26]||(t[26]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",mo,[o.currentPath?(u(),c("tr",{key:0,class:"hover:bg-gray-50 cursor-pointer",onClick:Ie},t[27]||(t[27]=[e("td",{class:"px-6 py-4"},null,-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),F(" .. ")])],-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},null,-1)]))):D("",!0),(u(!0),c(Y,null,se(o.folders,a=>(u(),c("tr",{key:a.path,class:"hover:bg-gray-50"},[e("td",ho,[e("input",{type:"checkbox",checked:v.value.has(a.path),onChange:y=>ge(a),onClick:t[1]||(t[1]=N(()=>{},["stop"])),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,go)]),e("td",xo,[e("div",wo,[e("button",{onClick:y=>Ae(a.path),class:"flex items-center hover:text-indigo-600"},[t[28]||(t[28]=e("svg",{class:"h-5 w-5 text-blue-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",ko,k(a.name),1)],8,yo),e("button",{onClick:N(y=>me(a),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},t[29]||(t[29]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,bo)])]),t[35]||(t[35]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),t[36]||(t[36]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),e("td",Co,[e("div",Bo,[t[34]||(t[34]=e("div",{class:"relative group"},[e("button",{disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Preview not available ")],-1)),e("div",_o,[e("button",{onClick:y=>Ee(a),disabled:z.value===a.path,class:ee(["p-1.5 transition-colors rounded-md",z.value===a.path?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"])},[z.value!==a.path?(u(),c("svg",jo,t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))):(u(),c("svg",zo,t[31]||(t[31]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])))],10,Mo),e("span",Fo,k(z.value===a.path?`Downloading... ${S.value}%`:"Download as ZIP"),1)]),e("div",Uo,[e("button",{onClick:y=>Te(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[32]||(t[32]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,$o),t[33]||(t[33]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete Folder ",-1))])])])]))),128)),(u(!0),c(Y,null,se(o.files,a=>(u(),c("tr",{key:a.path,class:"hover:bg-gray-50"},[e("td",Vo,[e("input",{type:"checkbox",checked:v.value.has(a.path),onChange:y=>ge(a),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Ao)]),e("td",Io,[e("div",Do,[e("button",{onClick:y=>X(a.name)?pe(a):null,class:ee(["flex items-center",X(a.name)?"hover:text-indigo-600 cursor-pointer":"cursor-default"])},[E(a.name)==="image"?(u(),c("svg",So,t[37]||(t[37]=[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="video"?(u(),c("svg",Ho,t[38]||(t[38]=[e("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},null,-1)]))):E(a.name)==="pdf"?(u(),c("svg",Po,t[39]||(t[39]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17h6M9 13h6M9 9h4"},null,-1)]))):E(a.name)==="excel"?(u(),c("svg",To,t[40]||(t[40]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="word"?(u(),c("svg",Eo,t[41]||(t[41]=[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 4a1 1 0 011 1v1h2V7a1 1 0 112 0v6a1 1 0 11-2 0v-2H9v2a1 1 0 11-2 0V7a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="archive"?(u(),c("svg",No,t[42]||(t[42]=[e("path",{d:"M2 6a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M2 12a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm6 1a1 1 0 100 2h4a1 1 0 100-2H8z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="code"?(u(),c("svg",Ro,t[43]||(t[43]=[e("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):E(a.name)==="text"?(u(),c("svg",Oo,t[44]||(t[44]=[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0h8v12H6V4z","clip-rule":"evenodd"},null,-1),e("path",{d:"M8 7h4v2H8V7zm0 4h4v2H8v-2z"},null,-1)]))):(u(),c("svg",Ko,t[45]||(t[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e("span",{class:ee(X(a.name)?"hover:underline":"")},k(a.name),3)],10,Lo),e("button",{onClick:N(y=>me(a),["stop"]),class:"ml-2 p-1 text-gray-500 hover:text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity duration-75"},t[46]||(t[46]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,qo)])]),e("td",Go,k(Ne(a.size)),1),e("td",Yo,k(a.last_modified),1),e("td",Zo,[e("div",Jo,[e("div",Qo,[X(a.name)?(u(),c("button",{key:0,onClick:y=>pe(a),class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-colors"},t[47]||(t[47]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Wo)):(u(),c("button",Xo,t[48]||(t[48]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]))),e("span",es,k(X(a.name)?"Preview":"Preview not available"),1)]),e("div",ts,[e("button",{onClick:y=>Le(a),class:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors"},t[49]||(t[49]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)]),8,os),t[50]||(t[50]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Download ",-1))]),e("div",ss,[e("button",{onClick:y=>Pe(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},t[51]||(t[51]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ls),t[52]||(t[52]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete ",-1))])])])]))),128))])])]))])])])],32),e("input",{ref_key:"fileInput",ref:l,type:"file",multiple:"",onChange:De,class:"hidden"},null,544),$(Lt,{modelValue:B.value,"onUpdate:modelValue":t[2]||(t[2]=a=>B.value=a),file:M.value,"bucket-id":o.activeBucket.id,onNavigatePrev:Se,onNavigateNext:He},null,8,["modelValue","file","bucket-id"]),(u(),Z(re,{to:"body"},[x.value?(u(),c("div",ns,[e("div",as,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[3]||(t[3]=a=>x.value=!1)},t[53]||(t[53]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[57]||(t[57]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",is,[e("div",rs,[e("div",ds,[t[55]||(t[55]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1)),e("div",us,[t[54]||(t[54]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Create New Folder ",-1)),e("div",cs,[Ce(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>h.value=a),onKeyup:Be(fe,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Folder name",disabled:b.value},null,40,vs),[[_e,h.value]])])])])]),e("div",ps,[$(le,{onClick:fe,disabled:!h.value.trim()||b.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[F(k(b.value?"Creating...":"Create"),1)]),_:1},8,["disabled"]),$(te,{onClick:t[5]||(t[5]=a=>{x.value=!1,h.value=""}),disabled:b.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[56]||(t[56]=[F(" Cancel ",-1)])),_:1,__:[56]},8,["disabled"])])])])])):D("",!0)])),(u(),Z(re,{to:"body"},[A.value?(u(),c("div",fs,[e("div",ms,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[6]||(t[6]=a=>A.value=!1)},t[58]||(t[58]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[61]||(t[61]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",hs,[e("div",gs,[e("div",xs,[t[59]||(t[59]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",ws,[e("h3",ys," Rename "+k(((r=I.value)==null?void 0:r.type)==="folder"?"Folder":"File"),1),e("div",ks,[Ce(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>U.value=a),onKeyup:Be(he,["enter"]),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:(g=I.value)==null?void 0:g.name,disabled:T.value},null,40,bs),[[_e,U.value]])])])])]),e("div",Cs,[$(le,{onClick:he,disabled:!U.value.trim()||U.value===((C=I.value)==null?void 0:C.name)||T.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[F(k(T.value?"Renaming...":"Rename"),1)]),_:1},8,["disabled"]),$(te,{onClick:t[8]||(t[8]=a=>{A.value=!1,I.value=null,U.value=""}),disabled:T.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[60]||(t[60]=[F(" Cancel ",-1)])),_:1,__:[60]},8,["disabled"])])])])])):D("",!0)])),(u(),Z(re,{to:"body"},[W.value?(u(),c("div",Bs,[e("div",_s,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:t[9]||(t[9]=a=>W.value=!1)},t[62]||(t[62]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),t[70]||(t[70]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Ms,[e("div",js,[e("div",zs,[t[68]||(t[68]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])],-1)),e("div",Fs,[e("h3",Us," Move "+k(O.value.length)+" Item"+k(O.value.length>1?"s":""),1),e("div",$s,[t[67]||(t[67]=e("p",{class:"text-sm text-gray-500 mb-3"},"Select destination folder:",-1)),oe.value?(u(),c("div",Vs,t[63]||(t[63]=[e("svg",{class:"animate-spin h-8 w-8 text-gray-400 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(u(),c("div",As,[e("div",{onClick:t[10]||(t[10]=a=>H.value=""),class:ee(["px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center",{"bg-blue-50":H.value===""}])},[t[64]||(t[64]=e("svg",{class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1)),e("span",Is,k(o.activeBucket.name)+" (root)",1)],2),(u(!0),c(Y,null,se(ue.value,a=>(u(),c("div",{key:a.path},[e("div",{onClick:y=>H.value=a.path,class:ee(["px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center",{"bg-blue-50":H.value===a.path}]),style:it({paddingLeft:a.level*20+12+"px"})},[t[65]||(t[65]=e("svg",{class:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",Ls,k(a.name),1)],14,Ds)]))),128))])),H.value?(u(),c("p",Ss,[t[66]||(t[66]=F(" Moving to: ",-1)),e("span",Hs,k(H.value||"Root"),1)])):D("",!0)])])])]),e("div",Ps,[$(le,{onClick:Ke,disabled:K.value||oe.value,class:"w-full sm:ml-3 sm:w-auto"},{default:j(()=>[F(k(K.value?"Moving...":"Move"),1)]),_:1},8,["disabled"]),$(te,{onClick:t[11]||(t[11]=a=>{W.value=!1,O.value=[],H.value=""}),disabled:K.value,class:"mt-3 w-full sm:mt-0 sm:ml-3 sm:w-auto"},{default:j(()=>t[69]||(t[69]=[F(" Cancel ",-1)])),_:1,__:[69]},8,["disabled"])])])])])):D("",!0)]))]}),_:1})],64))}};export{Gs as default};
