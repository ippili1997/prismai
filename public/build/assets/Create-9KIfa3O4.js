import{m as k,u as h,p as w,g as i,o as d,a as r,d as o,h as C,w as p,b as e,e as A,n as S,t as a,i as b,f as y,l as V,F as R}from"./app-DzzCvcVE.js";import{_ as P}from"./AuthenticatedLayout-zf8b6xXe.js";import{_ as u,a as m,b as n}from"./TextInput-Cicmw5U1.js";import{P as T}from"./PrimaryButton-DAJVConl.js";import"./ApplicationLogo-CDPlq1vm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"font-semibold text-xl text-gray-800 leading-tight"},B={class:"py-12"},I={class:"max-w-2xl mx-auto sm:px-6 lg:px-8 space-y-4"},E={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},F={class:"flex items-center gap-2"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-4 space-y-4"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-4 border-b border-gray-200"},D={class:"text-base font-medium text-gray-900"},N={class:"p-4 space-y-4"},j={class:"mt-1 text-sm text-gray-600"},z={key:0},H={class:"mt-1 text-sm text-gray-600"},L={class:"mt-1 text-sm text-gray-600"},K={key:1},$={class:"pt-4 mt-4"},G={class:"flex items-center justify-end gap-3"},Y={class:"bg-blue-50 overflow-hidden shadow-sm sm:rounded-lg border border-blue-200"},J={class:"p-4 bg-blue-50 border-b border-blue-200"},Q={class:"text-base font-medium text-blue-900"},X={class:"p-4"},Z={key:0,class:"text-sm text-blue-700 space-y-1"},ee={key:1,class:"text-sm text-blue-700 space-y-1"},se={key:2,class:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200"},te={class:"bg-gray-900 rounded-md overflow-x-auto relative"},oe={class:"flex items-center justify-between p-2 border-b border-gray-700"},re={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:1,class:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f=`[
  {
    "AllowedOrigins": [
      "https://prismai.up.railway.app"
    ],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE", "HEAD"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3600
  }
]`,pe=k({__name:"Create",props:{provider:{}},setup(x){const s=h({name:"",provider:x.provider||"r2",bucket_name:"",region:"",access_key_id:"",secret_access_key:"",endpoint:"",public_url:""}),_=()=>{s.post(route("buckets.store"),{onFinish:()=>{s.hasErrors||s.reset("access_key_id","secret_access_key")}})},c=w(!1),v=async()=>{try{await navigator.clipboard.writeText(f),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch(g){console.error("Failed to copy text: ",g)}};return(g,t)=>(d(),i(R,null,[r(o(C),{title:"Add Bucket"}),r(P,null,{header:p(()=>[e("h2",U," Add "+a(o(s).provider==="r2"?"Cloudflare R2":"Amazon S3")+" Bucket ",1)]),default:p(()=>[e("div",B,[e("div",I,[e("form",{onSubmit:A(_,["prevent"]),class:"space-y-4"},[e("div",E,[e("div",F,[t[7]||(t[7]=e("span",{class:"text-sm text-gray-600"},"Provider:",-1)),e("span",{class:S(["px-3 py-1 inline-flex text-sm font-semibold rounded-full",{"bg-blue-100 text-blue-800":o(s).provider==="r2","bg-orange-100 text-orange-800":o(s).provider==="s3"}])},a(o(s).provider==="r2"?"Cloudflare R2":"Amazon S3"),3)])]),e("div",M,[t[9]||(t[9]=e("div",{class:"p-4 border-b border-gray-200"},[e("h3",{class:"text-base font-medium text-gray-900"},"Your Configuration")],-1)),e("div",q,[e("div",null,[r(u,{for:"name",value:"Friendly Name"}),r(m,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o(s).name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).name=l),required:"",autofocus:"",placeholder:"My Storage Bucket"},null,8,["modelValue"]),r(n,{class:"mt-2",message:o(s).errors.name},null,8,["message"]),t[8]||(t[8]=e("p",{class:"mt-1 text-sm text-gray-600"}," A name to help you identify this bucket in Prism AI ",-1))])])]),e("div",O,[e("div",W,[e("h3",D,a(o(s).provider==="r2"?"Cloudflare R2":"AWS S3")+" Credentials ",1)]),e("div",N,[e("div",null,[r(u,{for:"bucket_name",value:"Bucket Name"}),r(m,{id:"bucket_name",type:"text",class:"mt-1 block w-full",modelValue:o(s).bucket_name,"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).bucket_name=l),required:"",placeholder:"my-bucket-name"},null,8,["modelValue"]),r(n,{class:"mt-2",message:o(s).errors.bucket_name},null,8,["message"]),e("p",j," The exact bucket name you created in "+a(o(s).provider==="r2"?"Cloudflare R2":"AWS S3"),1)]),o(s).provider==="s3"?(d(),i("div",z,[r(u,{for:"region",value:"Region"}),r(m,{id:"region",type:"text",class:"mt-1 block w-full",modelValue:o(s).region,"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).region=l),required:o(s).provider==="s3",placeholder:"us-east-1"},null,8,["modelValue","required"]),r(n,{class:"mt-2",message:o(s).errors.region},null,8,["message"]),t[10]||(t[10]=e("p",{class:"mt-1 text-sm text-gray-600"}," The AWS region where your bucket is located ",-1))])):b("",!0),e("div",null,[r(u,{for:"access_key_id",value:"Access Key ID"}),r(m,{id:"access_key_id",type:"text",class:"mt-1 block w-full font-mono text-sm",modelValue:o(s).access_key_id,"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).access_key_id=l),required:"",autocomplete:"off"},null,8,["modelValue"]),r(n,{class:"mt-2",message:o(s).errors.access_key_id},null,8,["message"]),e("p",H," From your "+a(o(s).provider==="r2"?"R2 API token":"AWS IAM credentials"),1)]),e("div",null,[r(u,{for:"secret_access_key",value:"Secret Access Key"}),r(m,{id:"secret_access_key",type:"password",class:"mt-1 block w-full font-mono text-sm",modelValue:o(s).secret_access_key,"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).secret_access_key=l),required:"",autocomplete:"off"},null,8,["modelValue"]),r(n,{class:"mt-2",message:o(s).errors.secret_access_key},null,8,["message"]),e("p",L," From your "+a(o(s).provider==="r2"?"R2 API token":"AWS IAM credentials"),1)]),o(s).provider==="r2"?(d(),i("div",K,[r(u,{for:"endpoint",value:"Endpoint URL"}),r(m,{id:"endpoint",type:"url",class:"mt-1 block w-full",modelValue:o(s).endpoint,"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).endpoint=l),required:o(s).provider==="r2",placeholder:"https://account-id.r2.cloudflarestorage.com"},null,8,["modelValue","required"]),r(n,{class:"mt-2",message:o(s).errors.endpoint},null,8,["message"]),t[11]||(t[11]=e("p",{class:"mt-1 text-sm text-gray-600"}," Found in R2 → Settings → S3 API ",-1))])):b("",!0),e("div",null,[r(u,{for:"public_url",value:"Public URL (Optional)"}),r(m,{id:"public_url",type:"url",class:"mt-1 block w-full",modelValue:o(s).public_url,"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).public_url=l),placeholder:"https://your-public-domain.com"},null,8,["modelValue"]),r(n,{class:"mt-2",message:o(s).errors.public_url},null,8,["message"]),t[12]||(t[12]=e("p",{class:"mt-1 text-sm text-gray-600"}," If you have a custom domain configured for your bucket ",-1))]),r(n,{class:"mt-2",message:o(s).errors.connection},null,8,["message"]),e("div",$,[e("div",G,[r(T,{disabled:o(s).processing,class:"px-4 py-2"},{default:p(()=>[y(a(o(s).processing?"Testing Connection...":"Add Bucket"),1)]),_:1},8,["disabled"]),r(o(V),{href:g.route("buckets.index"),class:"inline-flex items-center px-4 py-2 bg-white border border-red-300 rounded-md font-semibold text-xs text-red-700 uppercase tracking-widest hover:border-red-400 hover:text-red-800 focus:outline-none focus:border-red-500 focus:ring focus:ring-red-200 transition ease-in-out duration-150"},{default:p(()=>t[13]||(t[13]=[y(" Cancel ",-1)])),_:1,__:[13]},8,["href"])])])])])],32),e("div",Y,[e("div",J,[e("h3",Q,a(o(s).provider==="r2"?"Cloudflare R2":"Amazon S3")+" Configuration Help ",1)]),e("div",X,[o(s).provider==="r2"?(d(),i("div",Z,t[14]||(t[14]=[e("p",{class:"font-medium text-blue-600 mb-2"},"To get your R2 credentials:",-1),e("ol",{class:"list-decimal list-inside space-y-1 text-xs"},[e("li",null,"Go to Cloudflare Dashboard → R2 → Manage R2 API Tokens"),e("li",null,"Create a token with Object Read & Write permissions"),e("li",null,"Copy the Access Key ID and Secret Access Key"),e("li",null,"Find your endpoint URL in R2 → Settings → S3 API")],-1)]))):(d(),i("div",ee,t[15]||(t[15]=[e("p",{class:"font-medium text-blue-600 mb-2"},"To get your S3 credentials:",-1),e("ol",{class:"list-decimal list-inside space-y-1 text-xs"},[e("li",null,"Go to AWS IAM Console → Users → Security credentials"),e("li",null,"Create an access key for programmatic access"),e("li",null,"Ensure the user has S3 read/write permissions"),e("li",null,"Use your bucket's region (e.g., us-east-1, eu-west-1)")],-1)]))),o(s).provider==="r2"?(d(),i("div",se,[t[19]||(t[19]=e("h3",{class:"text-xs font-medium text-amber-800 mb-1"}," Required CORS Policy for R2 ",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-amber-700 mb-2"}," Configure this CORS policy in R2 → Your Bucket → Settings → CORS Policy: ",-1)),e("div",te,[e("div",oe,[t[18]||(t[18]=e("span",{class:"text-xs text-gray-400"},"CORS Configuration",-1)),e("button",{type:"button",onClick:v,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-300 bg-gray-800 rounded hover:bg-gray-700 transition-colors"},[c.value?(d(),i("svg",le,t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(d(),i("svg",re,t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)]))),y(" "+a(c.value?"Copied!":"Copy"),1)])]),e("pre",{class:"text-xs text-gray-100 p-3"},a(f))])])):b("",!0)])])])])]),_:1})],64))}});export{pe as default};
