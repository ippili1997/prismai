import{m as Ve,p as k,j as ne,s as ae,x as $e,y as Ae,c as de,o as p,w as D,g as v,i as I,b as t,t as C,f as q,e as H,T as De,z as Y,a as P,d as Q,h as Ie,l as ie,F as O,q as W,n as X,A as $}from"./app-CcyE6ug4.js";import{_ as Se}from"./AuthenticatedLayout-Ms_MJ2pH.js";import{P as Le}from"./PrimaryButton-IXQUyNwA.js";import{D as Pe}from"./DangerButton-BKCDdb3U.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-D8-qtaRj.js";const Ee={key:0,class:"fixed inset-0 z-50 overflow-hidden"},Te={class:"relative flex items-center"},Ne={class:"bg-white rounded-lg shadow-xl max-w-6xl max-h-[90vh] w-full min-w-[800px] overflow-hidden"},Re={class:"flex items-center justify-between p-4 border-b"},Oe={class:"text-lg font-semibold text-gray-900"},qe={class:"text-sm text-gray-500"},Ge={class:"flex items-center gap-2"},Ke=["href"],Ye={class:"relative overflow-auto bg-gray-50 min-h-[600px] h-[calc(90vh-8rem)]"},Ze={key:0,class:"flex items-center justify-center h-full"},Je={key:1,class:"flex items-center justify-center h-full"},Qe={class:"text-center"},We={class:"mt-2 text-sm text-gray-600"},Xe={key:2,class:"flex items-center justify-center h-full"},et={key:3,class:"h-full min-h-[600px]"},tt={key:0,class:"h-full min-h-[600px] flex items-center justify-center p-4"},ot=["src","alt"],st=["src"],nt={key:2,class:"h-full flex items-center justify-center bg-black"},at=["src"],it={key:3,class:"h-full flex items-center justify-center"},rt=["src"],lt={key:4,class:"h-full overflow-auto"},dt={class:"bg-white p-4 text-sm font-mono whitespace-pre-wrap break-words"},ct=Ve({__name:"FileViewer",props:{file:{},bucketId:{},modelValue:{type:Boolean}},emits:["update:modelValue","navigate-prev","navigate-next"],setup(e,{emit:s}){const n=e,r=s,l=k(!0),d=k(""),u=k(""),f=k(""),b=k(!1),x=ne(()=>{var y;if(!n.file)return"unknown";const g=((y=n.file.name.split(".").pop())==null?void 0:y.toLowerCase())||"";return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",webm:"video",mov:"video",avi:"video",mkv:"video",mp3:"audio",wav:"audio",ogg:"audio",m4a:"audio",flac:"audio",pdf:"pdf",txt:"text",log:"text",md:"text",js:"code",ts:"code",jsx:"code",tsx:"code",css:"code",scss:"code",sass:"code",html:"code",xml:"code",json:"code",php:"code",py:"code",java:"code",c:"code",cpp:"code",h:"code",sql:"code",sh:"code",yml:"code",yaml:"code"}[g]||"unknown"}),B=ne(()=>["image","video","audio","pdf","text","code"].includes(x.value)),h=async()=>{var g,m;if(!(!n.file||!n.modelValue)){if(l.value=!0,d.value="",u.value="",f.value="",b.value=!1,!B.value){l.value=!1;return}try{const y=await Y.post(route("files.view-url",{bucket:n.bucketId}),{key:n.file.path});y.data.is_text&&y.data.content?(f.value=y.data.content,b.value=!0):(u.value=y.data.view_url,b.value=!1)}catch(y){console.error("Failed to load view URL:",y),d.value=((m=(g=y.response)==null?void 0:g.data)==null?void 0:m.error)||"Failed to load file preview"}finally{l.value=!1}}};ae(()=>n.modelValue,g=>{g&&n.file&&h()}),ae(()=>n.file,g=>{g&&n.modelValue&&h()});const j=()=>{r("update:modelValue",!1),u.value="",f.value="",d.value="",b.value=!1},M=g=>{n.modelValue&&(g.key==="Escape"?j():g.key==="ArrowLeft"?r("navigate-prev"):g.key==="ArrowRight"&&r("navigate-next"))};$e(()=>{window.addEventListener("keydown",M)}),Ae(()=>{window.removeEventListener("keydown",M)});const _=g=>{if(g===0)return"0 Bytes";const m=1024,y=["Bytes","KB","MB","GB"],A=Math.floor(Math.log(g)/Math.log(m));return parseFloat((g/Math.pow(m,A)).toFixed(2))+" "+y[A]};return(g,m)=>(p(),de(De,{name:"modal"},{default:D(()=>{var y,A,N,G;return[g.modelValue?(p(),v("div",Ee,[t("div",{class:"absolute inset-0 bg-black bg-opacity-75 cursor-pointer",onClick:j}),t("div",{class:"relative h-full flex items-center justify-center p-4",onClick:H(j,["self"])},[t("div",Te,[t("button",{onClick:m[0]||(m[0]=K=>g.$emit("navigate-prev")),class:"absolute -left-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Previous file (←)"},m[2]||(m[2]=[t("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),t("button",{onClick:m[1]||(m[1]=K=>g.$emit("navigate-next")),class:"absolute -right-14 top-1/2 -translate-y-1/2 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"Next file (→)"},m[3]||(m[3]=[t("svg",{class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),t("div",Ne,[t("div",Re,[t("div",null,[t("h3",Oe,C((y=g.file)==null?void 0:y.name),1),t("p",qe,C(_(((A=g.file)==null?void 0:A.size)||0)),1)]),t("div",Ge,[t("a",{href:g.route("files.download",{bucket:g.bucketId,key:(N=g.file)==null?void 0:N.path}),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},m[4]||(m[4]=[t("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),q(" Download ",-1)]),8,Ke),t("button",{onClick:j,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},m[5]||(m[5]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",Ye,[l.value?(p(),v("div",Ze,m[6]||(m[6]=[t("div",{class:"text-center"},[t("svg",{class:"animate-spin h-10 w-10 text-gray-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("p",{class:"mt-2 text-sm text-gray-600"},"Loading preview...")],-1)]))):d.value?(p(),v("div",Je,[t("div",Qe,[m[7]||(m[7]=t("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),t("p",We,C(d.value),1)])])):B.value?u.value||f.value?(p(),v("div",et,[x.value==="image"?(p(),v("div",tt,[t("img",{src:u.value,alt:(G=g.file)==null?void 0:G.name,class:"max-w-full max-h-full object-contain"},null,8,ot)])):x.value==="pdf"?(p(),v("iframe",{key:1,src:u.value,class:"w-full h-full min-h-[600px]",frameborder:"0"},null,8,st)):x.value==="video"?(p(),v("div",nt,[t("video",{src:u.value,controls:"",class:"max-w-full max-h-full"}," Your browser does not support the video tag. ",8,at)])):x.value==="audio"?(p(),v("div",it,[t("audio",{src:u.value,controls:"",class:"w-full max-w-md"}," Your browser does not support the audio tag. ",8,rt)])):(x.value==="text"||x.value==="code")&&b.value?(p(),v("div",lt,[t("pre",dt,[t("code",null,C(f.value),1)])])):I("",!0)])):I("",!0):(p(),v("div",Xe,m[8]||(m[8]=[t("div",{class:"text-center"},[t("svg",{class:"h-12 w-12 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("p",{class:"mt-2 text-sm text-gray-600"},"This file type cannot be previewed"),t("p",{class:"mt-1 text-xs text-gray-500"},"Please download the file to view it")],-1)])))])])])])])):I("",!0)]}),_:1}))}}),ut=He(ct,[["__scopeId","data-v-62055ee5"]]);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,s,n){const r=Number(0xffffffffn&s),l=Number(s>>32n);this.setUint32(e+(n?0:4),r,n),this.setUint32(e+(n?4:0),l,n)}});var T=e=>new DataView(new ArrayBuffer(e)),F=e=>new Uint8Array(e.buffer||e),E=e=>new TextEncoder().encode(String(e)),S=e=>Math.min(4294967295,Number(e)),re=e=>Math.min(65535,Number(e));function pt(e,s,n){s===void 0||s instanceof Date||(s=new Date(s));const r=e!==void 0;if(n||(n=r?436:509),e instanceof File)return{isFile:r,t:s||new Date(e.lastModified),bytes:e.stream(),mode:n};if(e instanceof Response)return{isFile:r,t:s||new Date(e.headers.get("Last-Modified")||Date.now()),bytes:e.body,mode:n};if(s===void 0)s=new Date;else if(isNaN(s))throw new Error("Invalid modification date.");if(!r)return{isFile:r,t:s,mode:n};if(typeof e=="string")return{isFile:r,t:s,bytes:E(e),mode:n};if(e instanceof Blob)return{isFile:r,t:s,bytes:e.stream(),mode:n};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:r,t:s,bytes:e,mode:n};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:r,t:s,bytes:F(e),mode:n};if(Symbol.asyncIterator in e)return{isFile:r,t:s,bytes:ce(e[Symbol.asyncIterator]()),mode:n};throw new TypeError("Unsupported input format.")}function ce(e,s=e){return new ReadableStream({async pull(n){let r=0;for(;n.desiredSize>r;){const l=await e.next();if(!l.value){n.close();break}{const d=ft(l.value);n.enqueue(d),r+=d.byteLength}}},cancel(n){var r;(r=s.throw)==null||r.call(s,n)}})}function ft(e){return typeof e=="string"?E(e):e instanceof Uint8Array?e:F(e)}function ue(e,s,n){let[r,l]=function(d){return d?d instanceof Uint8Array?[d,1]:ArrayBuffer.isView(d)||d instanceof ArrayBuffer?[F(d),1]:[E(d),0]:[void 0,0]}(s);if(e instanceof File)return{i:ee(r||E(e.name)),o:BigInt(e.size),u:l};if(e instanceof Response){const d=e.headers.get("content-disposition"),u=d&&d.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),f=u&&u[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),b=f&&decodeURIComponent(f),x=n||+e.headers.get("content-length");return{i:ee(r||E(b)),o:BigInt(x),u:l}}return r=ee(r,e!==void 0||n!==void 0),typeof e=="string"?{i:r,o:BigInt(E(e).length),u:l}:e instanceof Blob?{i:r,o:BigInt(e.size),u:l}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{i:r,o:BigInt(e.byteLength),u:l}:{i:r,o:vt(e,n),u:l}}function vt(e,s){return s>-1?BigInt(s):e?void 0:0n}function ee(e,s=1){if(!e||e.every(n=>n===47))throw new Error("The file must have a name.");if(s)for(;e[e.length-1]===47;)e=e.subarray(0,-1);else e[e.length-1]!==47&&(e=new Uint8Array([...e,47]));return e}var pe=new Uint32Array(256);for(let e=0;e<256;++e){let s=e;for(let n=0;n<8;++n)s=s>>>1^(1&s&&3988292384);pe[e]=s}function le(e,s=0){s=~s;for(var n=0,r=e.length;n<r;n++)s=s>>>8^pe[255&s^e[n]];return~s>>>0}function fe(e,s,n=0){const r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,l=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;s.setUint16(n,r,1),s.setUint16(n+2,l,1)}function ht({i:e,u:s},n){return 8*(!s||(n??function(r){try{gt.decode(r)}catch{return 0}return 1}(e)))}var gt=new TextDecoder("utf8",{fatal:1});function mt(e,s=0){const n=T(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|s),fe(e.t,n,10),n.setUint16(26,e.i.length,1),F(n)}async function*wt(e){let{bytes:s}=e;if("then"in s&&(s=await s),s instanceof Uint8Array)yield s,e.l=le(s,0),e.o=BigInt(s.length);else{e.o=0n;const n=s.getReader();for(;;){const{value:r,done:l}=await n.read();if(l)break;e.l=le(r,e.l),e.o+=BigInt(r.length),yield r}}}function xt(e,s){const n=T(16+(s?8:0));return n.setUint32(0,1347094280),n.setUint32(4,e.isFile?e.l:0,1),s?(n.setBigUint64(8,e.o,1),n.setBigUint64(16,e.o,1)):(n.setUint32(8,S(e.o),1),n.setUint32(12,S(e.o),1)),F(n)}function yt(e,s,n=0,r=0){const l=T(46);return l.setUint32(0,1347092738),l.setUint32(4,755182848),l.setUint16(8,2048|n),fe(e.t,l,12),l.setUint32(16,e.isFile?e.l:0,1),l.setUint32(20,S(e.o),1),l.setUint32(24,S(e.o),1),l.setUint16(28,e.i.length,1),l.setUint16(30,r,1),l.setUint16(40,e.mode|(e.isFile?32768:16384),1),l.setUint32(42,S(s),1),F(l)}function kt(e,s,n){const r=T(n);return r.setUint16(0,1,1),r.setUint16(2,n-4,1),16&n&&(r.setBigUint64(4,e.o,1),r.setBigUint64(12,e.o,1)),r.setBigUint64(n-8,s,1),F(r)}function ve(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified,e.mode]]}var bt=e=>function(s){let n=BigInt(22),r=0n,l=0;for(const d of s){if(!d.i)throw new Error("Every file must have a non-empty name.");if(d.o===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(d.i)}".`);const u=d.o>=0xffffffffn,f=r>=0xffffffffn;r+=BigInt(46+d.i.length+(u&&8))+d.o,n+=BigInt(d.i.length+46+(12*f|28*u)),l||(l=u)}return(l||r>=0xffffffffn)&&(n+=BigInt(76)),n+r}(function*(s){for(const n of s)yield ue(...ve(n)[0])}(e));function Bt(e,s={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof s.length=="bigint"||Number.isInteger(s.length))&&s.length>0&&(n["Content-Length"]=String(s.length)),s.metadata&&(n["Content-Length"]=String(bt(s.metadata))),new Response(Ct(e,s),{headers:n})}function Ct(e,s={}){const n=function(r){var d;const l=r[Symbol.iterator in r?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const u=await l.next();if(u.done)return u;const[f,b]=ve(u.value);return{done:0,value:Object.assign(pt(...b),ue(...f))}},throw:(d=l.throw)==null?void 0:d.bind(l),[Symbol.asyncIterator](){return this}}}(e);return ce(async function*(r,l){const d=[];let u=0n,f=0n,b=0;for await(const h of r){const j=ht(h,l.buffersAreUTF8);yield mt(h,j),yield new Uint8Array(h.i),h.isFile&&(yield*wt(h));const M=h.o>=0xffffffffn,_=12*(u>=0xffffffffn)|28*M;yield xt(h,M),d.push(yt(h,u,j,_)),d.push(h.i),_&&d.push(kt(h,u,_)),M&&(u+=8n),f++,u+=BigInt(46+h.i.length)+h.o,b||(b=M)}let x=0n;for(const h of d)yield h,x+=BigInt(h.length);if(b||u>=0xffffffffn){const h=T(76);h.setUint32(0,1347094022),h.setBigUint64(4,BigInt(44),1),h.setUint32(12,755182848),h.setBigUint64(24,f,1),h.setBigUint64(32,f,1),h.setBigUint64(40,x,1),h.setBigUint64(48,u,1),h.setUint32(56,1347094023),h.setBigUint64(64,u+x,1),h.setUint32(72,1,1),yield F(h)}const B=T(22);B.setUint32(0,1347093766),B.setUint16(8,re(f),1),B.setUint16(10,re(f),1),B.setUint32(12,S(x),1),B.setUint32(16,S(u),1),yield F(B)}(n,s),n)}const Mt={class:"flex items-center justify-between"},Ut={class:"text-sm text-gray-600 mt-1"},jt={class:"flex items-center space-x-2"},zt={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_t={key:1},Ft={key:2},Vt={class:"py-12"},$t={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},At={key:0,class:"absolute inset-0 z-50 bg-indigo-50 bg-opacity-90 flex items-center justify-center pointer-events-none"},Dt={class:"p-4 border-b border-gray-200"},It={class:"flex items-center space-x-2 text-sm"},St={class:"p-6"},Lt={key:0,class:"text-center py-12"},Pt={key:1,class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ht={class:"min-w-full divide-y divide-gray-300"},Et={class:"bg-gray-50"},Tt={scope:"col",class:"w-12 px-6 py-3"},Nt=["checked"],Rt={class:"bg-white divide-y divide-gray-200"},Ot={class:"px-6 py-4"},qt=["checked","onChange"],Gt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Kt=["onClick"],Yt={class:"group-hover:underline"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Jt={class:"flex items-center space-x-2"},Qt={class:"relative group"},Wt=["onClick","disabled"],Xt={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},eo={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},to={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},oo={class:"relative group"},so=["onClick"],no={class:"px-6 py-4"},ao=["checked","onChange"],io={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ro=["onClick"],lo={key:0,class:"h-5 w-5 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},co={key:1,class:"h-5 w-5 text-purple-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},uo={key:2,class:"h-5 w-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},po={key:3,class:"h-5 w-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},fo={key:4,class:"h-5 w-5 text-blue-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},vo={key:5,class:"h-5 w-5 text-yellow-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},ho={key:6,class:"h-5 w-5 text-indigo-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},go={key:7,class:"h-5 w-5 text-gray-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},mo={key:8,class:"h-5 w-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},yo={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ko={class:"flex items-center space-x-2"},bo={class:"relative group"},Bo=["onClick"],Co={key:1,disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},Mo={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"},Uo={class:"relative group"},jo=["onClick"],zo={class:"relative group"},_o=["onClick"],So={__name:"Index",props:{files:Array,folders:Array,activeBucket:Object,currentPath:String,breadcrumb:Array},setup(e){const s=e,n=k(null),r=k(!1),l=k(0),d=k(0),u=k(0),f=k(new Set),b=k(!1),x=k(!1),B=k(null),h=k(!1),j=k(0),M=k(null),_=k(0),g=i=>{$.get(route("files.index",{bucket:s.activeBucket.id,prefix:i}))},m=()=>{if(s.currentPath){const i=s.currentPath.split("/").filter(a=>a);i.pop();const o=i.length>0?i.join("/")+"/":"";$.get(route("files.index",{bucket:s.activeBucket.id,prefix:o}))}},y=()=>{n.value.click()},A=async i=>{const o=Array.from(i.target.files);if(o.length===0)return;d.value=o.length,u.value=0,l.value=0,r.value=!0;let a=0,c=[];for(const w of o)try{await N(w),a++,u.value++,l.value=Math.round(u.value/d.value*100)}catch{c.push(w.name),u.value++,l.value=Math.round(u.value/d.value*100)}i.target.value="",r.value=!1,l.value=0,f.value.clear(),a>0?$.reload({only:["files","folders"],onSuccess:()=>{c.length>0&&alert(`${a} file(s) uploaded successfully. Failed to upload: ${c.join(", ")}`)}}):c.length>0&&alert(`Failed to upload: ${c.join(", ")}`)},N=async(i,o="")=>{var a,c,w,U;try{const z=o||i.name,ze=z.split("/").pop(),se=z.substring(0,z.lastIndexOf("/")),Z=await Y.post(route("files.upload-url",{bucket:s.activeBucket.id}),{filename:z,content_type:i.type||"application/octet-stream",prefix:s.currentPath}),{upload_url:L,key:J}=Z.data;await Y.put(L,i,{headers:{"Content-Type":i.type||"application/octet-stream"}})}catch(z){throw console.error("Upload failed:",z),console.error("Error details:",z.response),alert("Upload error: "+(((c=(a=z.response)==null?void 0:a.data)==null?void 0:c.error)||((U=(w=z.response)==null?void 0:w.data)==null?void 0:U.message)||z.message)),z}},G=i=>{window.location.href=route("files.download",{bucket:s.activeBucket.id,key:i.path})},K=i=>{B.value=i,x.value=!0},he=()=>{const i=s.files.findIndex(o=>{var a;return o.path===((a=B.value)==null?void 0:a.path)});i>0&&(B.value=s.files[i-1])},ge=()=>{const i=s.files.findIndex(o=>{var a;return o.path===((a=B.value)==null?void 0:a.path)});i<s.files.length-1&&(B.value=s.files[i+1])},me=i=>{confirm(`Are you sure you want to delete ${i.name}?`)&&$.delete(route("files.destroy",{bucket:s.activeBucket.id,key:i.path}),{preserveState:!0,preserveScroll:!0})},we=i=>{confirm(`Are you sure you want to delete the folder "${i.name}" and all its contents?`)&&$.delete(route("files.destroy",{bucket:s.activeBucket.id,key:i.path}),{preserveState:!0,preserveScroll:!0})},xe=async i=>{var o,a;try{M.value=i.path,_.value=0;const c=await Y.post(route("files.folder-download-urls",{bucket:s.activeBucket.id}),{folder_path:i.path}),{files:w,folder_name:U,total_size:z,file_count:ze}=c.data;if(w.length===0){alert("This folder is empty.");return}const se=await Promise.all(w.map(async(J,_e)=>{const Fe=await fetch(J.url);return _.value=Math.round((_e+1)/w.length*100),{name:J.path,input:Fe}})),Z=await Bt(se).blob(),L=document.createElement("a");L.href=URL.createObjectURL(Z),L.download=`${U}.zip`,L.click(),URL.revokeObjectURL(L.href)}catch(c){console.error("Failed to download folder:",c),alert("Failed to download folder: "+(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.error)||c.message))}finally{M.value=null,_.value=0}},ye=i=>{if(i===0)return"0 Bytes";const o=1024,a=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(i)/Math.log(o));return parseFloat((i/Math.pow(o,c)).toFixed(2))+" "+a[c]},te=i=>{f.value.has(i.path)?f.value.delete(i.path):f.value.add(i.path),f.value=new Set(f.value)},ke=()=>{const i=s.files.length+s.folders.length;if(f.value.size===i)f.value.clear();else{const o=[...s.files.map(a=>a.path),...s.folders.map(a=>a.path)];f.value=new Set(o)}},be=async()=>{if(f.value.size!==0&&confirm(`Are you sure you want to delete ${f.value.size} item(s)?`)){b.value=!0;for(const i of f.value)await $.delete(route("files.destroy",{bucket:s.activeBucket.id,key:i}),{preserveState:!1,preserveScroll:!0});f.value.clear(),b.value=!1,$.reload()}},V=i=>{const o=i.split(".").pop().toLowerCase();return{jpg:"image",jpeg:"image",png:"image",gif:"image",svg:"image",webp:"image",bmp:"image",mp4:"video",avi:"video",mkv:"video",mov:"video",wmv:"video",webm:"video",pdf:"pdf",doc:"word",docx:"word",xls:"excel",xlsx:"excel",csv:"excel",ppt:"powerpoint",pptx:"powerpoint",txt:"text",log:"text",md:"text",zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",js:"code",ts:"code",jsx:"code",tsx:"code",py:"code",java:"code",cpp:"code",c:"code",h:"code",hpp:"code",html:"code",css:"code",scss:"code",sass:"code",less:"code",json:"code",xml:"code",yaml:"code",yml:"code",php:"code",rb:"code",go:"code",rs:"code",swift:"code",sql:"code",sh:"code",bash:"code",ps1:"code",bat:"code",vue:"code",jsx:"code",tsx:"code",env:"code",gitignore:"code",dockerfile:"code"}[o]||"file"},R=i=>{const o=i.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","svg","webp","bmp","mp4","webm","mov","avi","mkv","mp3","wav","ogg","m4a","flac","pdf","txt","log","md","js","ts","jsx","tsx","css","scss","sass","html","xml","json","php","py","java","c","cpp","h","sql","sh","yml","yaml"].includes(o)},Be=i=>{i.preventDefault(),i.stopPropagation(),j.value++,h.value=!0},Ce=i=>{i.preventDefault(),i.stopPropagation(),j.value--,j.value===0&&(h.value=!1)},Me=i=>{i.preventDefault(),i.stopPropagation()},Ue=async i=>{i.preventDefault(),i.stopPropagation(),h.value=!1,j.value=0;const o=Array.from(i.dataTransfer.items),a=[];for(const c of o)if(c.kind==="file"){const w=c.webkitGetAsEntry?c.webkitGetAsEntry():c.getAsEntry();if(w)await oe(w,a);else{const U=c.getAsFile();U&&a.push({file:U,path:U.name})}}a.length>0&&await je(a)},oe=async(i,o,a="")=>{if(i.isFile){const c=await new Promise(w=>i.file(w));o.push({file:c,path:a+c.name})}else if(i.isDirectory){const c=i.createReader(),w=await new Promise(U=>{c.readEntries(U)});for(const U of w)await oe(U,o,a+i.name+"/")}},je=async i=>{d.value=i.length,u.value=0,l.value=0,r.value=!0;let o=0,a=[];for(const{file:c,path:w}of i)try{await N(c,w),o++,u.value++,l.value=Math.round(u.value/d.value*100)}catch{a.push(w),u.value++,l.value=Math.round(u.value/d.value*100)}r.value=!1,l.value=0,f.value.clear(),o>0?$.reload({only:["files","folders"],onSuccess:()=>{a.length>0&&alert(`${o} file(s) uploaded successfully. Failed to upload: ${a.join(", ")}`)}}):a.length>0&&alert(`Failed to upload: ${a.join(", ")}`)};return(i,o)=>(p(),v(O,null,[P(Q(Ie),{title:"Files"}),P(Se,null,{header:D(()=>[t("div",Mt,[t("div",null,[o[2]||(o[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Files ",-1)),t("p",Ut," Browsing: "+C(e.activeBucket.name)+" ("+C(e.activeBucket.provider)+") ",1)]),t("div",jt,[P(Le,{onClick:y,disabled:r.value},{default:D(()=>[r.value?I("",!0):(p(),v("svg",zt,o[3]||(o[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)]))),r.value?(p(),v("span",_t,"Uploading... "+C(l.value)+"%",1)):(p(),v("span",Ft,"Upload"))]),_:1},8,["disabled"]),f.value.size>0?(p(),de(Pe,{key:0,onClick:be,disabled:b.value},{default:D(()=>[o[4]||(o[4]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),q(" Delete Selected ("+C(f.value.size)+") ",1)]),_:1,__:[4]},8,["disabled"])):I("",!0)])])]),default:D(()=>[t("div",Vt,[t("div",$t,[t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative",onDragenter:H(Be,["prevent"]),onDragleave:H(Ce,["prevent"]),onDragover:H(Me,["prevent"]),onDrop:H(Ue,["prevent"])},[h.value?(p(),v("div",At,o[5]||(o[5]=[t("div",{class:"text-center"},[t("svg",{class:"mx-auto h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),t("p",{class:"mt-2 text-lg font-medium text-indigo-900"},"Drop files or folders here"),t("p",{class:"text-sm text-indigo-700"},"Files will be uploaded to the current folder")],-1)]))):I("",!0),t("div",Dt,[t("nav",It,[P(Q(ie),{href:i.route("files.index",{bucket:e.activeBucket.id}),class:"text-gray-600 hover:text-gray-900"},{default:D(()=>[q(C(e.activeBucket.name),1)]),_:1},8,["href"]),(p(!0),v(O,null,W(e.breadcrumb,(a,c)=>(p(),v(O,{key:c},[o[6]||(o[6]=t("span",{class:"text-gray-400"},"/",-1)),P(Q(ie),{href:i.route("files.index",{bucket:e.activeBucket.id,prefix:a.path}),class:"text-gray-600 hover:text-gray-900"},{default:D(()=>[q(C(a.name),1)]),_:2},1032,["href"])],64))),128))])]),t("div",St,[e.files.length===0&&e.folders.length===0?(p(),v("div",Lt,[o[8]||(o[8]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),o[9]||(o[9]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No files",-1)),o[10]||(o[10]=t("p",{class:"mt-1 text-sm text-gray-500"},"This folder is empty.",-1)),t("div",{class:"mt-6"},[o[7]||(o[7]=t("p",{class:"text-sm text-gray-500"}," Drag and drop files or folders here, or ",-1)),t("button",{onClick:y,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500"}," browse to upload ")])])):(p(),v("div",Pt,[t("table",Ht,[t("thead",Et,[t("tr",null,[t("th",Tt,[t("input",{type:"checkbox",onChange:ke,checked:e.files.length+e.folders.length>0&&f.value.size===e.files.length+e.folders.length,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Nt)]),o[11]||(o[11]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name ",-1)),o[12]||(o[12]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Size ",-1)),o[13]||(o[13]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Modified ",-1)),o[14]||(o[14]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),t("tbody",Rt,[e.currentPath?(p(),v("tr",{key:0,class:"hover:bg-gray-50 cursor-pointer",onClick:m},o[15]||(o[15]=[t("td",{class:"px-6 py-4"},null,-1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},[t("div",{class:"flex items-center"},[t("svg",{class:"h-5 w-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})]),q(" .. ")])],-1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1),t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},null,-1)]))):I("",!0),(p(!0),v(O,null,W(e.folders,a=>(p(),v("tr",{key:a.path,class:"hover:bg-gray-50"},[t("td",Ot,[t("input",{type:"checkbox",checked:f.value.has(a.path),onChange:c=>te(a),onClick:o[0]||(o[0]=H(()=>{},["stop"])),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,qt)]),t("td",Gt,[t("button",{onClick:c=>g(a.path),class:"flex items-center group hover:text-indigo-600"},[o[16]||(o[16]=t("svg",{class:"h-5 w-5 text-blue-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),t("span",Yt,C(a.name),1)],8,Kt)]),o[22]||(o[22]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),o[23]||(o[23]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"-",-1)),t("td",Zt,[t("div",Jt,[o[21]||(o[21]=t("div",{class:"relative group"},[t("button",{disabled:"",class:"p-1.5 text-gray-300 cursor-not-allowed rounded-md"},[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),t("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Preview not available ")],-1)),t("div",Qt,[t("button",{onClick:c=>xe(a),disabled:M.value===a.path,class:X(["p-1.5 transition-colors rounded-md",M.value===a.path?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"])},[M.value!==a.path?(p(),v("svg",Xt,o[17]||(o[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))):(p(),v("svg",eo,o[18]||(o[18]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])))],10,Wt),t("span",to,C(M.value===a.path?`Downloading... ${_.value}%`:"Download as ZIP"),1)]),t("div",oo,[t("button",{onClick:c=>we(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},o[19]||(o[19]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,so),o[20]||(o[20]=t("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete Folder ",-1))])])])]))),128)),(p(!0),v(O,null,W(e.files,a=>(p(),v("tr",{key:a.path,class:"hover:bg-gray-50"},[t("td",no,[t("input",{type:"checkbox",checked:f.value.has(a.path),onChange:c=>te(a),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,ao)]),t("td",io,[t("button",{onClick:c=>R(a.name)?K(a):null,class:X(["flex items-center group",R(a.name)?"hover:text-indigo-600 cursor-pointer":"cursor-default"])},[V(a.name)==="image"?(p(),v("svg",lo,o[24]||(o[24]=[t("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"},null,-1)]))):V(a.name)==="video"?(p(),v("svg",co,o[25]||(o[25]=[t("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},null,-1)]))):V(a.name)==="pdf"?(p(),v("svg",uo,o[26]||(o[26]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17h6M9 13h6M9 9h4"},null,-1)]))):V(a.name)==="excel"?(p(),v("svg",po,o[27]||(o[27]=[t("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z","clip-rule":"evenodd"},null,-1)]))):V(a.name)==="word"?(p(),v("svg",fo,o[28]||(o[28]=[t("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 4a1 1 0 011 1v1h2V7a1 1 0 112 0v6a1 1 0 11-2 0v-2H9v2a1 1 0 11-2 0V7a1 1 0 011-1z","clip-rule":"evenodd"},null,-1)]))):V(a.name)==="archive"?(p(),v("svg",vo,o[29]||(o[29]=[t("path",{d:"M2 6a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"},null,-1),t("path",{"fill-rule":"evenodd",d:"M2 12a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm6 1a1 1 0 100 2h4a1 1 0 100-2H8z","clip-rule":"evenodd"},null,-1)]))):V(a.name)==="code"?(p(),v("svg",ho,o[30]||(o[30]=[t("path",{"fill-rule":"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):V(a.name)==="text"?(p(),v("svg",go,o[31]||(o[31]=[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0h8v12H6V4z","clip-rule":"evenodd"},null,-1),t("path",{d:"M8 7h4v2H8V7zm0 4h4v2H8v-2z"},null,-1)]))):(p(),v("svg",mo,o[32]||(o[32]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),t("span",{class:X(R(a.name)?"group-hover:underline":"")},C(a.name),3)],10,ro)]),t("td",wo,C(ye(a.size)),1),t("td",xo,C(a.last_modified),1),t("td",yo,[t("div",ko,[t("div",bo,[R(a.name)?(p(),v("button",{key:0,onClick:c=>K(a),class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-colors"},o[33]||(o[33]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Bo)):(p(),v("button",Co,o[34]||(o[34]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]))),t("span",Mo,C(R(a.name)?"Preview":"Preview not available"),1)]),t("div",Uo,[t("button",{onClick:c=>G(a),class:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors"},o[35]||(o[35]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)]),8,jo),o[36]||(o[36]=t("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Download ",-1))]),t("div",zo,[t("button",{onClick:c=>me(a),class:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors"},o[37]||(o[37]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,_o),o[38]||(o[38]=t("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap"}," Delete ",-1))])])])]))),128))])])]))])],32)])]),t("input",{ref_key:"fileInput",ref:n,type:"file",multiple:"",onChange:A,class:"hidden"},null,544),P(ut,{modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=a=>x.value=a),file:B.value,"bucket-id":e.activeBucket.id,onNavigatePrev:he,onNavigateNext:ge},null,8,["modelValue","file","bucket-id"])]),_:1})],64))}};export{So as default};
