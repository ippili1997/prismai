import{_ as b}from"./AuthenticatedLayout-D3Ac0C3T.js";import{m as B,q as C,g as r,o as i,a,d as c,h as N,w as n,b as e,l as m,f as l,F as f,s as S,c as g,t as d,n as A,i as $,u}from"./app-BMnjDofT.js";import{P as _}from"./PrimaryButton-BIidaaQR.js";import{_ as v,D as F}from"./SecondaryButton-H4PlIuBg.js";import"./ApplicationLogo-CUkoQBPw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6 text-gray-900"},j={class:"flex justify-between items-center mb-6"},M={key:0,class:"text-center py-12"},T={class:"mt-6"},q={key:1,class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200"},E={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap"},R=["onClick"],U={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},H={class:"px-6 py-4 whitespace-nowrap"},I={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},J={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Q={class:"flex items-center space-x-2"},ie=B({__name:"Index",props:{buckets:{}},setup(W){const x=C(null),y=o=>{u({}).post(route("buckets.test",o),{preserveScroll:!0})},h=o=>{u({}).post(route("buckets.activate",o),{preserveScroll:!0})},w=o=>{u({}).post(route("buckets.activate",o),{preserveScroll:!0,onSuccess:()=>{window.location.href=route("files.index",{bucket:o})}})},k=o=>{confirm("Are you sure you want to remove this bucket configuration?")&&(x.value=o,u({}).delete(route("buckets.destroy",o),{preserveScroll:!0,onFinish:()=>{x.value=null}}))};return(o,t)=>(i(),r(f,null,[a(c(N),{title:"Buckets"}),a(b,null,{header:n(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Storage Buckets ",-1)])),default:n(()=>[e("div",V,[e("div",D,[e("div",L,[e("div",P,[e("div",j,[t[2]||(t[2]=e("h3",{class:"text-lg font-medium"},"Your Connected Buckets",-1)),a(c(m),{href:o.route("buckets.create")},{default:n(()=>[a(_,null,{default:n(()=>t[1]||(t[1]=[l("Add New Bucket",-1)])),_:1,__:[1]})]),_:1},8,["href"])]),o.buckets.length===0?(i(),r("div",M,[t[4]||(t[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),t[5]||(t[5]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No buckets connected",-1)),t[6]||(t[6]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by connecting your first storage bucket.",-1)),e("div",T,[a(c(m),{href:o.route("buckets.create")},{default:n(()=>[a(_,null,{default:n(()=>t[3]||(t[3]=[l("Add New Bucket",-1)])),_:1,__:[3]})]),_:1},8,["href"])])])):(i(),r("div",q,[e("table",z,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Provider "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bucket "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Connected "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",E,[(i(!0),r(f,null,S(o.buckets,s=>(i(),r("tr",{key:s.id},[e("td",G,[s.is_active?(i(),g(c(m),{key:0,href:o.route("files.index",{bucket:s.id}),class:"text-sm font-medium text-indigo-600 hover:text-indigo-900 hover:underline cursor-pointer"},{default:n(()=>[l(d(s.name),1)]),_:2},1032,["href"])):(i(),r("button",{key:1,onClick:p=>w(s.id),class:"text-sm font-medium text-gray-600 hover:text-indigo-600 hover:underline cursor-pointer text-left"},d(s.name),9,R))]),e("td",U,[e("span",{class:A(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-blue-100 text-blue-800":s.provider==="r2","bg-orange-100 text-orange-800":s.provider==="s3"}])},d(s.provider.toUpperCase()),3)]),e("td",Y,d(s.bucket_name),1),e("td",H,[s.is_active?(i(),r("span",I," Active ")):(i(),r("span",J," Inactive "))]),e("td",K,d(s.last_connected_at||"Never"),1),e("td",O,[e("div",Q,[a(v,{onClick:p=>y(s.id),class:"text-xs"},{default:n(()=>t[7]||(t[7]=[l(" Test ",-1)])),_:2,__:[7]},1032,["onClick"]),s.is_active?$("",!0):(i(),g(v,{key:0,onClick:p=>h(s.id),class:"text-xs"},{default:n(()=>t[8]||(t[8]=[l(" Activate ",-1)])),_:2,__:[8]},1032,["onClick"])),a(F,{onClick:p=>k(s.id),disabled:x.value===s.id,class:"text-xs"},{default:n(()=>t[9]||(t[9]=[l(" Remove ",-1)])),_:2,__:[9]},1032,["onClick","disabled"])])])]))),128))])])]))])])])])]),_:1})],64))}});export{ie as default};
