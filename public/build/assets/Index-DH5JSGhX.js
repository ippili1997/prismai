import{m as M,p as m,g as n,o as a,a as l,d as h,h as S,w as d,b as e,l as k,F as w,q as V,n as x,i as C,t as v,e as g,s as R,f as B,u as y}from"./app-DGtmmAZw.js";import{_ as A}from"./AuthenticatedLayout-BI8PJzsq.js";import{P as N}from"./PrimaryButton-DHY4HcjD.js";import{_ as z}from"./Modal-DT9_L91M.js";import{_ as F}from"./SecondaryButton-BGSmlLeb.js";import{_ as L}from"./TextInput-DQfHwpIp.js";import"./ApplicationLogo-B7JKHdeO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"grid md:grid-cols-2 gap-6 mb-8"},K={class:"bg-white shadow-sm sm:rounded-lg"},P={class:"p-6 text-gray-900 overflow-visible"},U={key:0,class:"text-center py-12"},q={key:1,class:"space-y-3"},G=["onClick"],T={key:0,class:"absolute inset-0 bg-gray-900 bg-opacity-0 group-hover:bg-opacity-5 transition-all duration-300 flex items-center justify-center"},W={class:"relative flex items-center justify-between"},Y={class:"flex-1"},I={class:"flex items-center gap-3"},J={class:"flex items-center gap-2 group/title"},O={class:"relative flex h-2 w-2"},Q={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"},X={class:"text-base font-semibold text-gray-900"},Z=["onClick"],ee={class:"mt-1.5 ml-4 space-y-0.5"},te={class:"text-sm text-gray-600"},se={class:"font-mono"},oe={class:"text-xs text-gray-500"},re={class:"flex items-center gap-2"},ne=["onClick"],ae=["onClick"],le={class:"relative group/tooltip"},ie=["onClick","disabled"],de={class:"p-6"},ue={class:"mt-6"},ce={class:"mt-6 flex justify-end gap-3"},_e=M({__name:"Index",props:{buckets:{}},setup(me){const f=m(null),u=m(!1),c=m(null),r=m(""),p=m(!1),b=o=>{y({}).post(route("buckets.activate",o),{preserveScroll:!0})},j=o=>{confirm("Are you sure you want to remove this bucket configuration?")&&(f.value=o,y({}).delete(route("buckets.destroy",o),{preserveScroll:!0,onFinish:()=>{f.value=null}}))},$=o=>{c.value=o,r.value=o.name,u.value=!0},_=()=>{var o,t;if(!r.value.trim()||r.value===((o=c.value)==null?void 0:o.name)){u.value=!1;return}p.value=!0,y({name:r.value.trim()}).patch(route("buckets.rename",(t=c.value)==null?void 0:t.id),{preserveScroll:!0,onSuccess:()=>{u.value=!1,c.value=null,r.value=""},onFinish:()=>{p.value=!1}})};return(o,t)=>(a(),n(w,null,[l(h(S),{title:"Buckets"}),l(A,null,{header:d(()=>t[3]||(t[3]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Storage Buckets ",-1)])),default:d(()=>[e("div",H,[e("div",D,[e("div",E,[l(h(k),{href:o.route("buckets.create",{provider:"s3"}),class:"block"},{default:d(()=>t[4]||(t[4]=[e("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg hover:shadow-lg transition-shadow cursor-pointer border-2 border-transparent hover:border-green-500"},[e("div",{class:"p-8 text-center"},[e("div",{class:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-10 h-10 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7c0 2.21-3.582 4-8 4S4 9.21 4 7s3.582-4 8-4 8 1.79 8 4z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])]),e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Amazon S3"),e("p",{class:"text-sm text-gray-600"},"Connect your AWS S3 buckets for scalable cloud storage"),e("div",{class:"mt-4"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"}," Add → ")])])],-1)])),_:1,__:[4]},8,["href"]),l(h(k),{href:o.route("buckets.create",{provider:"r2"}),class:"block"},{default:d(()=>t[5]||(t[5]=[e("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg hover:shadow-lg transition-shadow cursor-pointer border-2 border-transparent hover:border-orange-500"},[e("div",{class:"p-8 text-center"},[e("div",{class:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-10 h-10 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})])]),e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Cloudflare R2"),e("p",{class:"text-sm text-gray-600"},"Connect your R2 buckets for S3-compatible storage at the edge"),e("div",{class:"mt-4"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800"}," Add → ")])])],-1)])),_:1,__:[5]},8,["href"])]),e("div",K,[e("div",P,[t[11]||(t[11]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-medium"},"Your Connected Buckets")],-1)),o.buckets.length===0?(a(),n("div",U,t[6]||(t[6]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No buckets connected",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by connecting your first storage bucket using the options above.",-1)]))):(a(),n("div",q,[(a(!0),n(w,null,V(o.buckets,s=>(a(),n("div",{key:s.id,class:x(["group relative border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 cursor-pointer border-l-4",{"!border-l-green-500":s.provider==="s3","!border-l-orange-500":s.provider==="r2"}]),onClick:i=>s.is_active?o.$inertia.visit(o.route("files.index",{bucket:s.id})):null},[s.is_active?(a(),n("div",T,t[7]||(t[7]=[e("div",{class:"text-gray-700 font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform scale-95 group-hover:scale-100"}," Click to browse files ",-1)]))):C("",!0),e("div",W,[e("div",Y,[e("div",I,[e("div",J,[e("span",O,[s.is_active?(a(),n("span",Q)):C("",!0),e("span",{class:x(["relative inline-flex rounded-full h-2 w-2",s.is_active?"bg-green-500":"bg-red-500"])},null,2)]),e("h3",X,v(s.name),1),e("button",{onClick:g(i=>$(s),["stop"]),class:"p-1 text-gray-400 hover:text-gray-700 opacity-0 group-hover/title:opacity-100 transition-opacity duration-75"},t[8]||(t[8]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Z)]),e("span",{class:x(["px-2 py-0.5 text-xs font-medium rounded-full",{"bg-orange-100 text-orange-700":s.provider==="r2","bg-green-100 text-green-700":s.provider==="s3"}])},v(s.provider.toUpperCase()),3)]),e("div",ee,[e("div",te,[e("span",se,v(s.bucket_name),1)]),e("div",oe," Last connected: "+v(s.last_connected_at||"Never"),1)])]),e("div",re,[s.is_active?(a(),n("button",{key:0,onClick:g(i=>b(s.id),["stop"]),class:"px-3 py-1 text-xs text-gray-600 hover:text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors"}," Disconnect ",8,ne)):(a(),n("button",{key:1,onClick:g(i=>b(s.id),["stop"]),class:"px-3 py-1 text-xs text-gray-600 hover:text-gray-900 border border-gray-300 rounded hover:bg-gray-50 transition-colors"}," Connect ",8,ae)),e("div",le,[e("button",{onClick:g(i=>j(s.id),["stop"]),disabled:f.value===s.id,class:"p-1.5 text-gray-400 hover:text-red-600 transition-colors rounded hover:bg-red-50"},t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ie),t[10]||(t[10]=e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white rounded shadow-md border border-gray-200 opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10"}," Remove bucket ",-1))])])])],10,G))),128))]))])])])]),l(z,{show:u.value,onClose:t[2]||(t[2]=s=>u.value=!1)},{default:d(()=>{var s;return[e("div",de,[t[13]||(t[13]=e("h2",{class:"text-lg font-medium text-gray-900"}," Rename Bucket ",-1)),e("div",ue,[l(L,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),type:"text",class:"mt-1 block w-full",placeholder:"Enter new bucket name",onKeyup:R(_,["enter"])},null,8,["modelValue"])]),e("div",ce,[l(F,{onClick:t[1]||(t[1]=i=>u.value=!1)},{default:d(()=>t[12]||(t[12]=[B(" Cancel ",-1)])),_:1,__:[12]}),l(N,{onClick:_,disabled:!r.value.trim()||r.value===((s=c.value)==null?void 0:s.name)||p.value},{default:d(()=>[B(v(p.value?"Renaming...":"Rename"),1)]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]),_:1})],64))}});export{_e as default};
